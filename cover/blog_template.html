    <!-- Entrada de blog (semana XX): Migración del ejercicio <exercise_name> a Gazebo Harmonic -->
    <div id="entry-XX" class="entry">
        <p class="date">SEMANA XX: XX-XX-20XX al XX-XX-20XX</p>

        <h1>
            Migración del ejercicio <exercise_name> a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de <exercise_name> ya migrado por completo a Gazebo Harmonic, se me
            ha pedido realizar la migración completa de Gazebo 11 a Gazebo Harmonic de un X 
            ejercicio, en este caso, <strong><exercise_name></strong>, que consiste en ... .
        </p>

        <div style="place-items: center; display: grid;">
            <a href="" target="_blank">
                <img src="images/semanaXX/exercise_name_exercise.png" alt="Exercise Name Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y/o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/<robot_name>/models/<robot_model_name>/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él. Además, es importante añadir al final de la nueva 
            versión los plugins correspondientes al <strong>velocity-control-system</strong>, 
            al <strong>odometry-publisher-system</strong> y al <strong>contact-system</strong>:
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/TheRoboticsClub/2025-upe-alberto-leon/blob/main/code/semanaXX/model.sdf"  target="_blank">https://github.com/TheRoboticsClub/2025-upe-alberto-leon/blob/main/code/semanaXX/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/<robot_name>/params/<robot_model_name>.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes a los plugins 
            publicadores y subscriptores del DiffDrive (<strong>/X/odom</strong> y 
            <strong>/X/cmd_vel</strong>), del sensor láser LIDAR
            (<strong>/X/laser/scan</strong>) de los 3 sensores bumper de contacto
            (<strong>/X/events/center_bumper</strong>, 
            <strong>/X/events/right_bumper</strong> y 
            <strong>/X/events/left_bumper</strong>) y de la cámara 
            (<strong>/camera/camera_info</strong>):
        </p>
        <pre><code>CODE</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de la línea <strong><robot_name>/params</strong> para que el 
            fichero que se acaba de crear (<strong><robot_model_name>.yaml</strong>) 
            se tenga en cuenta a la hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROBOT<br>    <robot_name>/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROBOT<br>    <robot_name>/models<br>    <robot_name>/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/<exercise_name>/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong><exercise_name>/</strong>, y a 
            su vez dentro de él el fichero <strong>spawn_robot.launch.py</strong>, habría que 
            coger cualquier fichero con el mismo nombre de otro ejercicio que ya esté 
            migrado a Gazebo Harmonic, copiar su contenido y comentar todo lo relativo a la 
            variable <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, 
            modificar el nombre del fichero que se le pasa como argumento a bridge_params 
            (en este caso, <strong><robot_model_name>.yaml</strong>):
        </p>
        <pre><code>CODE</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/<exercise_name>.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con 
            el mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            las líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del mundo que utiliza este 
            ejercicio.
        </p>
        <pre><code>CODE</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong><exercise_name>/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y/o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/<world_name>.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <pre><code>CODE</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/<exercise_name>.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son 
            exactamente iguales.
        </p>
        <pre><code>CODE</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, <exercise_name>) y cambiar
            el valor de la columna <strong>type</strong> de <strong>gazebo</strong> a 
            <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>...</code></pre>
        <pre><code># GAZEBO HARMONIC<br>...</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>exercise-name-harmonic</strong>. Es importante hacer esto 
            siempre para así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i exercise-name-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio 
            <strong><exercise_name></strong> al lanzar el Docker de 
            RoboticsAcademy con todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semanaXX/exercise_name_image.png" alt="Exercise Name Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto el escenario como el robot han sido migrados 
            correctamente, se muestra una pequeña animación del robot moviéndose
            para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semanaXX/exercise_name_image.png">
            <source src="videos/semanaXX/exercise_name_video.mp4" type="video/mp4">
        </video>

    </div>
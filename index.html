<!-- Tipo de documento e idioma -->
<!DOCTYPE html>
<html lang="es">

<head>

    <!-- Conjunto de caracteres -->
    <meta charset="UTF-8">

    <!-- Adaptación del tamaño de la ventana -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Título de la pestaña del navegador -->
    <title>Blog de Prácticas</title>

    <!-- Icono de la pestaña (favicon) -->
    <link rel="icon" type="image/png" href="cover/window_logo.png">

    <!-- Estilo CSS de la página -->
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #000000;
        }
        h1 {
            text-align: center;
            color: white;
        }
        p {
            color: white;
        }
        pre {
            background-color: #1e2a35;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 14px;
        }
        code {
            color: #ff0000;
            font-family: monospace;
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
        }
        .header-container img {
            width: 200px;
            height: 200px;
            border-radius: 0;
            object-fit: cover;
        }
        .entry {
            display: none;
            background-color: #000000;
            padding: 15px;
            margin: 10px 0;
            border-left: 5px solid #ff0000;
            color: white;
        }
        .date {
            font-weight: bold;
            color: white;
        }
        .buttons {
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            padding: 10px;
            margin: 5px;
            cursor: pointer;
            border: none;
            background-color: #ff0000;
            color: white;
            border-radius: 5px;
        }
        .screenshot {
            display: block;
            max-width: 100%;
            margin-top: 10px;
        }
    </style>

</head>

<body>

    <!-- Encabezado -->
    <div class="header-container">
        <a href="https://jderobot.github.io/" target="_blank">
            <img src="cover/logo.png" alt="Logo de JdeRobot">
        </a>
        <h1>BLOG DE PRÁCTICAS EXTERNAS JDEROBOT<br>ALBERTO LEÓN LUENGO</h1>
        <a href="https://github.com/aleon2020" target="_blank">
            <img src="cover/profile_picture.png" alt="Foto de Perfil">
        </a>
    </div>

    <!-- Párrafo 1 -->
    <p>
        ¡Bienvenido! En esta web se encuentra todo el contenido visto y aprendido en mis 
        Prácticas Externas realizadas con la empresa JdeRobot durante el curso 2025-2026 
        en el Grado en Ingeniería de Robótica Software en la Universidad Rey Juan Carlos.
    </p>

    <!-- Párrafo 2 -->
    <p>
        A continuación, se muestran todas las entradas correspondientes a los blogs realizados,
        cuyo contenido se divide en las 20 semanas que han durado mis Prácticas.
    </p>
    
    <!-- Botones de navegación por semana (semanas 01 a 10) -->
    <div class="buttons">
        <button onclick="showEntry(1)">SEMANA 01</button>
        <button onclick="showEntry(2)">SEMANA 02</button>
        <button onclick="showEntry(3)">SEMANA 03</button>
        <button onclick="showEntry(4)">SEMANA 04</button>
        <button onclick="showEntry(5)">SEMANA 05</button>
        <button onclick="showEntry(6)">SEMANA 06</button>
        <button onclick="showEntry(7)">SEMANA 07</button>
        <button onclick="showEntry(8)">SEMANA 08</button>
        <button onclick="showEntry(9)">SEMANA 09</button>
        <button onclick="showEntry(10)">SEMANA 10</button>
    </div>

    <!-- Botones de navegación por semana (semanas 11 a 20) -->
    <div class="buttons">
        <button onclick="showEntry(11)">SEMANA 11</button>
        <button onclick="showEntry(12)">SEMANA 12</button>
        <button onclick="showEntry(13)">SEMANA 13</button>
        <button onclick="showEntry(14)">SEMANA 14</button>
        <button onclick="showEntry(15)">SEMANA 15</button>
        <button onclick="showEntry(16)">SEMANA 16</button>
        <button onclick="showEntry(17)">SEMANA 17</button>
        <button onclick="showEntry(18)">SEMANA 18</button>
        <button onclick="showEntry(19)">SEMANA 19</button>
        <button onclick="showEntry(20)">SEMANA 20</button>
    </div>

    <!-- Entrada de blog (semana 01): Instalación de Docker en Ubuntu 24.04 -->
    <div id="entry-1" class="entry">
        <p class="date">SEMANA 01: 22-09-2025 al 26-09-2025</p>

        <h1>
            Instalación de Docker en Ubuntu 24.04
        </h1>

        <p>
            En primer lugar, se abre una terminal por defecto en el directorio 
            <strong>/home/username</strong>, a través de la cual se irán ejecutando los 
            siguientes comandos:
        </p>

        <p><strong>
            PASO 1: Acceso al escritorio
        </p></strong>
        <pre><code>cd Escritorio/</code></pre>

        <p><strong>
            PASO 2: Clonación del repositorio de RoboticsAcademy
        </p></strong>
        <pre><code>git clone --recurse-submodules https://github.com/JdeRobot/RoboticsAcademy.git</code></pre>

        <p><strong>
            PASO 3: Acceso al repositorio de RoboticsAcademy
        </p></strong>
        <pre><code>cd RoboticsAcademy/</code></pre>

        <p><strong>
            PASO 4: Ejecución del script de preparación
        </p></strong>
        <p>
            Este script configurará el entorno de desarrollo. Sin embargo, al intentar ejecutar
            este script por primera vez, aparecerán varios errores debido a algunas dependencias
            que están pendientes de instalar, concretamente <strong>yarn</strong> y 
            <strong>docker</strong>.
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>
        <pre><code>./scripts/develop_academy.sh: linea 146: yarn: orden no encontrada<br>./scripts/develop_academy.sh: linea 147: yarn: orden no encontrada<br>./scripts/develop_academy.sh: linea 166: docker: orden no encontrada<br>Cleaning up...<br>./scripts/develop_academy.sh: linea 28: docker: orden no encontrada</code></pre>
    
        <p><strong>
            PASO 5: Ejecución de comandos de configuración
        </p></strong>
        <p>
            Todos los comandos mostrados a continuación se encargarán de actualizar los 
            repositorios de APT, instalar las herramientas necesarias (certificados y curl), 
            crear el directorio para las claves de Docker, descargar la clave GPG de 
            Docker, dar permisos de lectura a dicha clave, añadir el repositorio de Docker a 
            APT y volver a actualizar la lista de paquetes.
        </p>
        <pre><code># Add Docker's official GPG key:<br>sudo apt-get update<br>sudo apt-get install ca-certificates curl<br>sudo install -m 0755 -d /etc/apt/keyrings<br>sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc<br>sudo chmod a+r /etc/apt/keyrings/docker.asc<br><br># Add the repository to Apt sources:<br>echo \<br>  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \<br>  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \<br>  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null<br>sudo apt-get update</code></pre>

        <p><strong>
            PASO 6: Instalación de Docker y todos sus componentes
        </p></strong>
        <pre><code>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</code></pre>

        <p><strong>
            PASO 7: Comprobación de la activación de Docker
        </p></strong>
        <pre><code>sudo systemctl status docker</code></pre>

        <p><strong>
            PASO 8: Instalación de Docker Compose
        </p></strong>
        <pre><code>sudo apt install docker-compose</code></pre>

        <p><strong>
            PASO 9: Verificación de la versión de Docker instalada
        </p></strong>
        <pre><code>docker --version</code></pre>

        <p><strong>
            PASO 10: Creación del grupo de usuarios de Docker
        </p></strong>
        <pre><code>sudo groupadd docker</code></pre>

        <p><strong>
            PASO 11: Adición del usuario actual al grupo Docker
        </p></strong>
        <pre><code>sudo usermod -aG docker $USER</code></pre>

        <p><strong>
            PASO 12: Cambio de grupo
        </p></strong>
        <pre><code>newgrp docker</code></pre>

        <p><strong>
            PASO 13: Reejecución del script de preparación
        </p></strong>
        <pre><code>sudo ./scripts/develop_academy.sh</code></pre>

    </div>
    
    <!-- Entrada de blog (semana 02): Configuración y uso de Docker en Visual Studio Code -->
    <div id="entry-2" class="entry">
        <p class="date">SEMANA 02: 29-09-2025 al 03-10-2025</p>

        <h1>
            Configuración y uso de Docker en Visual Studio Code
        </h1>

        <p><strong>
            PASO 1: Apertura de RoboticsAcademy en Visual Studio Code
        </p></strong>
        <pre><code>cd Escritorio/RoboticsAcademy/</code></pre>
        <pre><code>code .</code></pre>

        <p><strong>
            PASO 2: Instalación de las extensiones de Docker
        </p></strong>
        <p>
            Tras instalar ambas extensiones, es necesario reiniciar el equipo para que 
            Docker y Visual Studio Code se integren correctamente.
        </p>
        <div style="place-items: center">
            <img src="images/semana02/containertools_extension.png" alt="Container Tools Extension" class="screenshot">
        </div>
        <div style="place-items: center">
            <img src="images/semana02/projectmanager_extension.png" alt="Project Manager Extension" class="screenshot">
        </div>
    
        <p><strong>
            PASO 3: Bucle de trabajo a seguir en Visual Studio Code
        </p></strong>
        <p>
            - Hacer los cambios necesarios dentro del directorio 
            <strong>RoboticsInfrastructure/</strong>.<br>
            - Hacer commit y push de dichos cambios en una nueva rama (Publish Branch).<br>
            - Acceder al directorio <strong>RoboticsAcademy/scripts/RADI/</strong>.
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <p>
            - Ejecutar el script <strong>build.sh</strong> dentro de la nueva rama.
        </p>
        <pre><code>./build.sh -i &lt;branch_name&gt;</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            - Volver al directorio principal.
        </p>
        <pre><code>cd ../..</code></pre>
        <p>
            - Cambiar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>.
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>
        <p>
            - Ejecutar el script de preparación para lanzar el Docker de RoboticsAcademy con 
            todos los cambios realizados.
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>
        <p>
            - Acceder a la dirección web http://0.0.0.0:7164/ que aparece en la terminal al
            ejecutar el comando anterior para poder entrar a Unibotics en local y verificar
            que los cambios se han realizado correctamente.
        </p>

    </div>

    <!-- Entrada de blog (semana 03): Lanzamiento del RoboticsBackend en local -->
    <div id="entry-3" class="entry">
        <p class="date">SEMANA 03: 06-10-2025 al 10-10-2025</p>

        <h1>
            Lanzamiento del RoboticsBackend en local
        </h1>

        <p><strong>
            PASO 1
        </p></strong>
        <p>
            Para lanzar el RoboticsBackend y poder trabajar en Unibotics en local, se debe 
            ejecutar el siguiente comando en la terminal:
        </p>
        <pre><code>docker run --rm -it --device /dev/dri -p 6080:6080 -p 1108:1108 -p 7163:7163 jderobot/robotics-backend:latest</code></pre>
    
        <p><strong>
            PASO 2
        </p></strong>
        <p>
            Se deja ejecutando el comando anterior en la terminal y se accede a la 
            <a href="https://unibotics.org/" target="_blank">página web de Unibotics</a>.
        </p>

        <p><strong>
            PASO 3
        </p></strong>
        <p>
            Una vez dentro de Unibotics, se selecciona el ejercicio en el que se quiera
            trabajar.
        </p>
        <p>
            <strong>NOTA</strong>: Para que todo funcione correctamente, se debe
            seleccionar la opción 'Local ROS2 (RoboticsBackend 4)', que aparece en la esquina 
            superior derecha al hacer clic en la foto de perfil.
        </p>
        <div style="place-items: center">
            <img src="images/semana03/roboticsbackend_option.png" alt="Robotics Backend Option" class="screenshot">
        </div>

        <p><strong>
            PASO 4
        </p></strong>
        <p>
            Verificar que, tanto la simulación en Gazebo como en la terminal se han lanzado 
            correctamente.
        </p>
        <div style="place-items: center">
            <img src="images/semana03/roboticsbackend_exercise.png" alt="Robotics Backend Local" class="screenshot">
        </div>

    </div>
    
    <!-- Entrada de blog (semana 04): Lanzamiento del RoboticsDatabase junto a RoboticsAcademy en local -->
    <div id="entry-4" class="entry">
        <p class="date">SEMANA 04: 13-10-2025 al 17-10-2025</p>

        <h1>
            Lanzamiento del RoboticsDatabase junto a RoboticsAcademy en local
        </h1>

        <p><strong>
            PASO 1
        </strong></p>
        <p>
            Para poder lanzar RoboticsDatabase junto a RoboticsAcademy, se debe ejecutar el 
            siguiente comando en la terminal:
        </p>
        <pre><code>docker run --hostname my-postgres --name academy_db -d\<br>    -e POSTGRES_DB=academy_db \<br>    -e POSTGRES_USER=user-dev \<br>    -e POSTGRES_PASSWORD=robotics-academy-dev \<br>    -e POSTGRES_PORT=5432 \<br>    -d -p 5432:5432 \<br>    jderobot/robotics-database:latest</code></pre>

        <p><strong>
            PASO 2
        </strong></p>
        <p>
            Una vez ejecutado el comando anterior, ya no será necesario ejecutarlo
            más veces, ya que lo que ha hecho este comando es crear un nuevo contenedor para 
            RoboticsDatabase, al cual se llamará con el flag --link cuando se vaya a lanzar 
            RoboticsAcademy. A continuación se muestran 3 formas diferentes de lanzar 
            RoboticsDatabase junto a RoboticsAcademy:
        </p>
        <p>
            Lanzamiento de RoboticsDatabase + RoboticsAcademy (NVIDIA + GPU)
        </p>
        <pre><code>docker run --rm -it $(nvidia-smi >/dev/null 2>&1 && echo "--gpus all" || echo "") --device /dev/dri -p 6080:6080 -p 6081:6081 -p 1108:1108 -p 7163:7163 -p 7164:7164 --link academy_db jderobot/robotics-academy:latest</code></pre>
        <p>
            <strong>NOTA</strong>: Para que este comando funcione, es necesario tener
            instalados los drivers de NVIDIA en Linux.
        </p>
        <p>
            Lanzamiento de RoboticsDatabase + RoboticsAcademy (GPU)
        </p>
        <pre><code>docker run --rm -it --device /dev/dri -p 6080:6080 -p 6081:6081 -p 1108:1108 -p 7163:7163 -p 7164:7164 --link academy_db jderobot/robotics-academy:latest</code></pre>
        <p>
            Lanzamiento de RoboticsDatabase + RoboticsAcademy (CPU)
        </p>
        <pre><code>docker run --rm -it -p 6080:6080 -p 6081:6081 -p 1108:1108 -p 7163:7163 -p 7164:7164 --link academy_db jderobot/robotics-academy:latest</code></pre>

        <p><strong>
            PASO 3
        </strong></p>
        <p>
            Para comprobar que todos los Dockers que se van a utilizar se hayan 
            descargado y configurado correctamente, se debe ejecutar el siguiente comando
            en la terminal:
        </p>
        <pre><code>sudo docker images</code></pre>
        <p>Cuyo resultado debe ser el siguiente:</p>
        <pre><code>REPOSITORY                   TAG       IMAGE ID       CREATED       SIZE<br>jderobot/robotics-backend    latest    0e2a10ccfaf4   5 days ago    27.2GB<br>jderobot/robotics-academy    latest    1c67a50c79c2   13 days ago   28.5GB<br>jderobot/robotics-database   latest    3a1d0407347e   13 days ago   483MB</code></pre>
    
    </div>

    <!-- Entrada de blog (semana 05): Ejercicio de calentamiento: Cambiar universo -->
    <div id="entry-5" class="entry">
        <p class="date">SEMANA 05: 20-10-2025 al 24-10-2025</p>

        <h1>
            Ejercicio de calentamiento: Cambiar universo
        </h1>

        <p>
            Para ir familiarizándome con el software de RoboticsInfrastructure, se me ha 
            pedido como primer ejercicio cambiar el universo de Gazebo de uno de los ejercicios 
            que ya se haya migrado a Gazebo Harmonic.
        </p>

        <p>
            En primer lugar, he accedido al fichero 
            <strong>RoboticsInfrastructure/database/universes.sql</strong> para localizar 
            aquellos universos ya migrados a Gazebo Harmonic.
        </p>
        <p>
            <strong>NOTA</strong>: La forma más sencilla de identificar los universos migrados
            a Gazebo Harmonic, es mirando si en su columna <strong>type</strong> aparece escrito 
            <strong>gazebo</strong> o <strong>gz</strong>. En caso de que aparezca escrito 
            <strong>gazebo</strong>, significa que ese universo todavía se encuentra en Gazebo 11 
            y no se ha migrado. Pero si aparece escrito <strong>gz</strong>, significa que ese 
            universo ya se ha migrado a Gazebo Harmonic.
        </p>

        <p>
            A continuación se listan todos los universos que tienen escrito <strong>gz</strong> 
            en su columna <strong>type</strong>, y que podrían utilizarse para llevar a cabo 
            este ejercicio de calentamiento:
        </p>
        <pre><code>12	Laser Mapping Warehouse	/opt/jderobot/Launchers/laser_mapping.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/laser_mapping.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>25	Vacuums House Markers	/opt/jderobot/Launchers/marker_visual_loc.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/marker_visual_loc.config"}	ROS2	gz	{1,-1.5,0.6,0,0,0}<br>31	Rescue People Harmonic	/opt/jderobot/Launchers/rescue_people.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/rescue_people.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>32	Follow Road Harmonic	/opt/jderobot/Launchers/follow_road.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_road.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>33	Small Laser Mapping Warehouse	/opt/jderobot/Launchers/small_laser_mapping.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/small_laser_mapping.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>34	Pick And Place Arm	/home/dev_ws/src/IndustrialRobots/ros2_SimRealRobotControl/ros2srrc_launch/moveit2/moveit2.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>35	Car Junction	/opt/jderobot/Launchers/car_junction.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/car_junction.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>36	Drone Gymkhana Harmonic	/opt/jderobot/Launchers/drone_gymkhana.launch.py	None	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>37	Tower Inspection Harmonic	/opt/jderobot/Launchers/power_tower_inspection.launch.py	None	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            En mi caso, he seleccionado los universos correspondientes a los ejercicios de 
            <strong>Laser Mapping</strong> (número 12) y <strong>Marker Based Visual Loc</strong>
            (número 25). El universo del <strong>Laser Mapping</strong> es un almacén tipo Amazon, 
            mientras que el universo del <strong>Marker Based Visual Loc</strong> es una casa de 
            dos plantas.
        </p>

        <p>
            El resultado final de este ejercicio visualizará el almacén del ejercicio
            <strong>Laser Mapping</strong> en el visor de Gazebo del ejercicio 
            <strong>Marker Based Visual Loc</strong>.
        </p>

        <p>
            A continuación se muestra cómo se ve inicialmente el ejercicio 
            <strong>Marker Based Visual Loc</strong> al lanzar el Docker de RoboticsAcademy 
            antes de realizar cualquier cambio en el código:
        </p>
        <div style="place-items: center">
            <img src="images/semana05/markervisualloc_original_world.png" alt="Original World" class="screenshot">
        </div>

        <p>
            El único cambio que he realizado ha sido en el fichero 
            <strong>RoboticsInfrastructure/Launchers/marker_visual_loc.launch.py</strong> 
            en la siguiente línea:
        </p>
        <pre><code># ANTES (UNIVERSO ORIGINAL)<br>world_file_name = "marker_visual_loc.world"<br><br># DESPUÉS (UNIVERSO NUEVO)<br>world_file_name = "laser_mapping.world"</code></pre>

        <p>
            Una vez realizado este cambio, he hecho commit y push en una nueva rama que he creado
            y publicado llamada <strong>test-aleon2020</strong>. Es importante hacer esto 
            siempre para evitar así cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como los cambios se han realizado en un fichero que se encuentra dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i test-aleon2020</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            <strong>NOTA</strong>: Si es la primera vez que se ejecuta este script, el 
            tiempo que tardará en ejecutarse por completo será considerablemente largo, ya que 
            debe configurar todo el entorno. Si es la primera vez que se ejecuta tardará unos 
            35-45 minutos, de lo contrario, tardará unos 2-3 minutos.
        </p>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio 
            <strong>Marker Based Visual Loc</strong> al lanzar el Docker de RoboticsAcademy 
            con todos estos cambios realizados en el código:
        </p>
        <div style="place-items: center">
            <img src="images/semana05/markervisualloc_new_world.png" alt="New World" class="screenshot">
        </div>
    </div>

    <!-- Entrada de blog (semana 06): Migración del ejercicio Obstacle Avoidance a Gazebo Harmonic -->
    <div id="entry-6" class="entry">
        <p class="date">SEMANA 06: 27-10-2025 al 31-10-2025</p>

        <h1>
            Migración del ejercicio Obstacle Avoidance a Gazebo Harmonic
        </h1>

        <p>
            Una vez realizado este primer ejercicio de calentamiento para irme familiarizando
            con el código de RoboticsInfrastructure, se me ha pedido realizar la migración 
            completa de Gazebo 11 a Gazebo Harmonic del ejercicio 
            <strong>Obstacle Avoidance</strong>, que introduce de forma práctica la navegación 
            local mediante el uso de campos de fuerza virtuales (VFF, Virtual Force Fields).
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/AutonomousCars/obstacle_avoidance" target="_blank">
                <img src="images/semana06/obstacle_avoidance_exercise.png" alt="Obstacle Avoidance Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/f1/models/f1_result_laser_no_cam/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él. Además, es importante añadir al final de la nueva 
            versión los plugins correspondientes al <strong>velocity-control-system</strong> 
            y al <strong>odometry-publisher-system</strong>:
        </p>
        <pre><code>&lt;?xml version='1.0'?&gt;<br>&lt;sdf version="1.9"&gt;<br>&lt;model name="f1_renault"&gt;<br>  &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>  &lt;static&gt;false&lt;/static&gt;<br><br>    &lt;link name="f1"&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>      &lt;inertial&gt;<br>        &lt;mass&gt;10&lt;/mass&gt;<br>        &lt;inertia&gt;<br>          &lt;ixx&gt;1&lt;/ixx&gt;<br>          &lt;ixy&gt;0.0&lt;/ixy&gt;<br>          &lt;iyy&gt;1&lt;/iyy&gt;<br>          &lt;ixz&gt;0.0&lt;/ixz&gt;<br>          &lt;iyz&gt;0.0&lt;/iyz&gt;<br>          &lt;izz&gt;1.0&lt;/izz&gt;<br>        &lt;/inertia&gt;<br>      &lt;/inertial&gt;<br>      &lt;collision name="collision"&gt;<br>        &lt;geometry&gt;<br>          &lt;mesh&gt;<br>            &lt;uri&gt;model://f1_renault_laser_no_cam/Renault/Car.obj&lt;/uri&gt;<br>            &lt;scale&gt;0.2 0.2 0.2&lt;/scale&gt;<br>          &lt;/mesh&gt;<br>        &lt;/geometry&gt;<br>      &lt;/collision&gt;<br>      &lt;visual name="visual"&gt;<br>        &lt;geometry&gt;<br>          &lt;mesh&gt;<br>            &lt;uri&gt;model://f1_renault_laser_no_cam/Renault/Car.obj&lt;/uri&gt;<br>            &lt;scale&gt;0.2 0.2 0.2&lt;/scale&gt;<br>          &lt;/mesh&gt;<br>        &lt;/geometry&gt;<br>      &lt;/visual&gt;<br>    &lt;/link&gt;<br><br>    &lt;link name='laser_body'&gt;<br>      &lt;pose&gt;0.500000 0.000000 0.072000 0.000000 0.000000 0.00000&lt;/pose&gt;<br>      &lt;visual name="visual_laser"&gt;<br>        &lt;geometry&gt;<br>          &lt;mesh&gt;<br>            &lt;uri&gt;model://f1_renault_laser_no_cam/meshes/hokuyo.dae&lt;/uri&gt;<br>          &lt;/mesh&gt;<br>        &lt;/geometry&gt;<br>      &lt;/visual&gt;<br><br>      &lt;sensor name="laser" type="gpu_lidar"&gt;<br>        &lt;always_on&gt;1&lt;/always_on&gt;<br>        &lt;visualize&gt;1&lt;/visualize&gt;<br>        &lt;pose&gt;0.500000 0.000000 0.072000 0.000000 0.000000 0.00000&lt;/pose&gt;<br>        &lt;update_rate&gt;20.000000&lt;/update_rate&gt;<br>        &lt;topic&gt;f1/laser/scan&lt;/topic&gt;<br>        &lt;frame&gt;base_scan&lt;/frame&gt;<br>        &lt;lidar&gt;<br>          &lt;scan&gt;<br>            &lt;horizontal&gt;<br>              &lt;samples&gt;180&lt;/samples&gt;<br>              &lt;resolution&gt;1.000000&lt;/resolution&gt;<br>              &lt;min_angle&gt;-1.570000&lt;/min_angle&gt;<br>              &lt;max_angle&gt;1.570000&lt;/max_angle&gt;<br>            &lt;/horizontal&gt;<br>          &lt;/scan&gt;<br>          &lt;range&gt;<br>            &lt;min&gt;0.080000&lt;/min&gt;<br>            &lt;max&gt;10.000000&lt;/max&gt;<br>            &lt;resolution&gt;0.010000&lt;/resolution&gt;<br>          &lt;/range&gt;<br>        &lt;/lidar&gt;<br>      &lt;/sensor&gt;<br>    &lt;/link&gt;<br><br>    &lt;!-- &lt;velocity_decay&gt;<br>      &lt;linear&gt;0.000000&lt;/linear&gt;<br>      &lt;angular&gt;0.000000&lt;/angular&gt;<br>    &lt;/velocity_decay&gt;<br>    &lt;self_collide&gt;0&lt;/self_collide&gt;<br>    &lt;kinematic&gt;0&lt;/kinematic&gt;<br>  &lt;/link&gt; --&gt;<br><br>    &lt;joint type="fixed" name="laser_fix"&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>      &lt;child&gt;laser_body&lt;/child&gt;<br>      &lt;parent&gt;f1&lt;/parent&gt;<br>      &lt;!-- &lt;axis&gt;<br>        &lt;xyz&gt;0 0 0&lt;/xyz&gt;<br>    &lt;/axis&gt; --&gt;<br>    &lt;/joint&gt;<br><br>    &lt;plugin filename="gz-sim-velocity-control-system" name="gz::sim::systems::VelocityControl"&gt;<br>      &lt;topic&gt;/F1ROS/cmd_vel&lt;/topic&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;plugin filename="gz-sim-odometry-publisher-system" name="gz::sim::systems::OdometryPublisher"&gt;<br>      &lt;odom_frame&gt;odom&lt;/odom_frame&gt;<br>      &lt;robot_base_frame&gt;xf1&lt;/robot_base_frame&gt;<br>      &lt;odom_publish_frequency&gt;20.0&lt;/odom_publish_frequency&gt;<br>      &lt;odom_topic&gt;F1ROS/odom&lt;/odom_topic&gt;<br>      &lt;dimensions&gt;3&lt;/dimensions&gt;<br>    &lt;/plugin&gt;<br><br>&lt;/model&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/f1/params/f1_result_laser_no_cam.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes al publicador y al 
            subscriptor del plugin del DiffDrive (<strong>F1ROS/odom</strong> y 
            <strong>/F1ROS/cmd_vel</strong>) y aquellos relativos al publicador del plugin del 
            láser (<strong>f1/laser/scan</strong>):
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "F1ROS/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/F1ROS/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "f1/laser/scan"<br>  gz_topic_name: "f1/laser/scan"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            La única modificación realizada en este fichero es la adición de la línea 
            <strong>f1/params</strong> para que el fichero que se acaba de crear 
            (<strong>f1_result_laser_no_cam.yaml</strong>) se tenga en cuenta a la hora de 
            lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # F1<br>    f1/models<br>    f1/launch<br>    f1/worlds<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # F1<br>    f1/models<br>    f1/launch<br>    f1/worlds<br>    f1/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/obstacle_avoidance/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong>obstacle_avoidance/</strong>, y a su vez dentro 
            de él el fichero <strong>spawn_robot.launch.py</strong>, lo único que habría que 
            hacer es coger cualquier fichero con el mismo nombre de otro ejercicio que ya esté 
            migrado a Gazebo Harmonic, copiar su contenido y comentar todo lo relativo a las 
            variables <strong>start_gazebo_ros_image_bridge_cmd</strong> y 
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a la variable 
            <strong>bridge_params</strong> (en este caso, 
            <strong>f1_renault_laser_no_cam.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "f1_renault_laser_no_cam"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "f1_renault_laser_no_cam.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_image_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/image_raw"],<br>    #     output="screen",<br>    # )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/simple_circuit_obstacles_followingcam.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que hacer un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            las líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza este 
            ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    robot_launch_dir = "/opt/jderobot/Launchers/obstacle_avoidance"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br>    world_file_name = "simple_circuit_obstacles_followingcam.world"<br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong>obstacle_avoidance/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/simple_circuit_obstacles_followingcam.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir todos
            aquellos flags &lt;include&gt; de la versión antigua por aquellos que aparezcan en 
            la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0" ?&gt;<br><br>&lt;sdf version="1.9"&gt;<br>  &lt;world name="default"&gt;<br><br>    &lt;plugin<br>      filename="gz-sim-physics-system"<br>      name="gz::sim::systems::Physics"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-scene-broadcaster-system"<br>      name="gz::sim::systems::SceneBroadcaster"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-user-commands-system"<br>      name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-sensors-system"<br>      name="gz::sim::systems::Sensors"&gt;<br>      &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;scene&gt;<br>      &lt;shadows&gt;false&lt;/shadows&gt;<br>    &lt;/scene&gt;<br><br>    &lt;light type="directional" name="sun"&gt;<br>      &lt;!-- &lt;cast_shadows&gt;true&lt;/cast_shadows&gt; --&gt;<br>      &lt;pose&gt;0 0 20 -1.3 0 0.5&lt;/pose&gt;<br>      &lt;diffuse&gt;0.8 0.8 0.8 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.01 0.01 0.01 1&lt;/specular&gt;<br>      &lt;intensity&gt;2&lt;/intensity&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br>    &lt;light type="point" name="point_light"&gt;<br>      &lt;pose&gt;0.73 0.09 8.77 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;1 1 1 1&lt;/diffuse&gt;<br>      &lt;specular&gt;.01 .01 .01 1&lt;/specular&gt;<br>      &lt;attenuation&gt;<br>        &lt;range&gt;20&lt;/range&gt;<br>        &lt;linear&gt;0.2&lt;/linear&gt;<br>        &lt;constant&gt;0.8&lt;/constant&gt;<br>        &lt;quadratic&gt;0.01&lt;/quadratic&gt;<br>      &lt;/attenuation&gt;<br>      &lt;!-- &lt;cast_shadows&gt;true&lt;/cast_shadows&gt; --&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br>    &lt;light type="point" name="point_light_01"&gt;<br>      &lt;pose&gt;3.482 -4.28 8.87 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;1 1 1 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.01 0.01 0.01 1&lt;/specular&gt;<br>      &lt;attenuation&gt;<br>        &lt;range&gt;10&lt;/range&gt;<br>        &lt;linear&gt;0.5&lt;/linear&gt;<br>        &lt;constant&gt;0.8&lt;/constant&gt;<br>        &lt;quadratic&gt;0.001&lt;/quadratic&gt;<br>      &lt;/attenuation&gt;<br>      &lt;cast_shadows&gt;false&lt;/cast_shadows&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br>    &lt;light type="point" name="point_light_02"&gt;<br>      &lt;pose&gt;0.13 0.46 11.60 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;1 1 1 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.01 0.01 0.01 1&lt;/specular&gt;<br>      &lt;attenuation&gt;<br>        &lt;range&gt;10&lt;/range&gt;<br>        &lt;linear&gt;0.2&lt;/linear&gt;<br>        &lt;constant&gt;0.5&lt;/constant&gt;<br>        &lt;quadratic&gt;0.001&lt;/quadratic&gt;<br>      &lt;/attenuation&gt;<br>      &lt;cast_shadows&gt;false&lt;/cast_shadows&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br>    &lt;light type="point" name="point_light_03"&gt;<br>      &lt;pose&gt;4.27 -1.27 11.21 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;1 1 1 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.01 0.01 0.01 1&lt;/specular&gt;<br>      &lt;attenuation&gt;<br>        &lt;range&gt;10&lt;/range&gt;<br>        &lt;linear&gt;0.5&lt;/linear&gt;<br>        &lt;constant&gt;0.8&lt;/constant&gt;<br>        &lt;quadratic&gt;0.001&lt;/quadratic&gt;<br>      &lt;/attenuation&gt;<br>      &lt;cast_shadows&gt;false&lt;/cast_shadows&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br>    &lt;light type="point" name="point_light_04"&gt;<br>      &lt;pose&gt;-0.31 -3.78 8.61 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;1 1 1 1&lt;/diffuse&gt;<br>      &lt;specular&gt;.01 .01 .01 1&lt;/specular&gt;<br>      &lt;attenuation&gt;<br>        &lt;range&gt;10&lt;/range&gt;<br>        &lt;linear&gt;0.5&lt;/linear&gt;<br>        &lt;constant&gt;0.8&lt;/constant&gt;<br>        &lt;quadratic&gt;0.001&lt;/quadratic&gt;<br>      &lt;/attenuation&gt;<br>      &lt;cast_shadows&gt;false&lt;/cast_shadows&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>    &lt;model name='ground_plane'&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>      &lt;link name='link'&gt;<br>        &lt;collision name='collision'&gt;<br>          &lt;geometry&gt;<br>            &lt;plane&gt;<br>              &lt;normal&gt;0.0 0.0 1&lt;/normal&gt;<br>              &lt;size&gt;1000 1000&lt;/size&gt;<br>            &lt;/plane&gt;<br>          &lt;/geometry&gt;<br>        &lt;/collision&gt;<br>      &lt;/link&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;/model&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://simple_circuit&lt;/uri&gt;<br>      &lt;pose&gt;-53.46 11.50 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_renault_laser_no_cam&lt;/uri&gt;<br>      &lt;pose&gt;0.04 0.68 0 0 0 -1.57&lt;/pose&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_1&lt;/name&gt;<br>      &lt;pose&gt;-0.1 -33 0 0 0 0&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_2&lt;/name&gt;<br>      &lt;pose&gt;-7 -40 0 0 0 -1.67&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_3&lt;/name&gt;<br>      &lt;pose&gt;-13.2 -18.8 0 0 0 -3&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_4&lt;/name&gt;<br>      &lt;pose&gt;-40 -11.5 0 0 0 -1.57&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_5&lt;/name&gt;<br>      &lt;pose&gt;-66.83 -34.15 0 0 0 -1.03&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_6&lt;/name&gt;<br>      &lt;pose&gt;-70.8 -34.2 0 0 0 -1.33&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_7&lt;/name&gt;<br>      &lt;pose&gt;-103 14.6 0 0 0 2.47&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_8&lt;/name&gt;<br>      &lt;pose&gt;-52.76 42.3 0 0 0 2.15&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_9&lt;/name&gt;<br>      &lt;pose&gt;-33.4 57.3 0 0 0 0&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_10&lt;/name&gt;<br>      &lt;pose&gt;-3.5 59 0 0 0 0.785&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_11&lt;/name&gt;<br>      &lt;pose&gt;1 26.2 0 0 0 0&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://f1_dummy_harmonic&lt;/uri&gt;<br>      &lt;name&gt;f1_dummy_12&lt;/name&gt;<br>      &lt;pose&gt;-1 24.5 0 0 0 0&lt;/pose&gt;<br>      &lt;static&gt;true&lt;/static&gt;<br>    &lt;/include&gt;<br><br>  &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/obstacle_avoidance.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Dark" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#f3f3f3" toolbar_text_color_light="#111111" toolbar_color_dark="#414141" toolbar_text_color_dark="#f3f3f3" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;1 1 1&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.2 0.2 0.2&lt;/background_color&gt;<br>    &lt;camera_pose&gt;0 3 2 0 0.5 -1.57&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="CameraTracking" name="Camera tracking"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;follow_target&gt;f1_renault&lt;/follow_target&gt;<br>    &lt;follow_offset&gt;0 0 1&lt;/follow_offset&gt;<br>    &lt;follow_pgain&gt;0.1&lt;/follow_pgain&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Obstacle Avoidance) y cambiar el valor 
            de la columna <strong>type</strong> de <strong>gazebo</strong> a 
            <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>19	Obstacle Avoidance Default	/opt/jderobot/Launchers/simple_circuit_obstacles_followingcam.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>19	Obstacle Avoidance Default	/opt/jderobot/Launchers/simple_circuit_obstacles_followingcam.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/obstacle_avoidance.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>obstacle-avoidance-harmonic</strong>. Es importante hacer esto siempre para 
            así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i obstacle-avoidance-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio <strong>Obstacle Avoidance</strong> 
            al lanzar el Docker de RoboticsAcademy con todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semana06/obstacle_avoidance_image.png" alt="Obstacle Avoidance Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto el circuito como el coche han sido migrados 
            correctamente, se muestra una pequeña animación del coche moviéndose en línea 
            recta para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana06/obstacle_avoidance_image.png">
            <source src="videos/semana06/obstacle_avoidance_video.mp4" type="video/mp4">
        </video>

    </div>

    <!-- Entrada de blog (semana 07): Migración del ejercicio Global Navigation a Gazebo Harmonic -->
    <div id="entry-7" class="entry">
        <p class="date">SEMANA 07: 03-11-2025 al 07-11-2025</p>

        <h1>
            Migración del ejercicio Global Navigation a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Obstacle Avoidance ya migrado por completo a Gazebo Harmonic, 
            se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo Harmonic de un 
            segundo ejercicio, en este caso, <strong>Global Navigation</strong>, que introduce 
            de forma práctica la navegación global mediante el uso y la implementación de la 
            lógica del algoritmo de planificación de ruta del gradiente (GPP, Gradient Path 
            Planning).
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/AutonomousCars/global_navigation/" target="_blank">
                <img src="images/semana07/global_navigation_exercise.png" alt="Global Navigation Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/taxi_navigator/models/taxi_holo_ROS_harmonic/model.sdf
        </strong></p>
        <p>
            En este caso, no ha sido necesario llevar a cabo ninguna modificación en este 
            fichero, ya que el coche utilizado para esta versión ya se encuentra migrado a 
            Gazebo Harmonic:
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;sdf version="1.9"&gt;<br>  &lt;model name="taxi_holo_ROS_harmonic"&gt;<br>    &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;static&gt;false&lt;/static&gt;<br><br>    &lt;!-- Chassis link --&gt;<br>    &lt;link name="taxi_holo"&gt;<br>      &lt;inertial&gt;<br>        &lt;mass&gt;750.0&lt;/mass&gt;<br>        &lt;inertia&gt;<br>          &lt;ixx&gt;1&lt;/ixx&gt;&lt;ixy&gt;0.0&lt;/ixy&gt;&lt;ixz&gt;0.0&lt;/ixz&gt;<br>          &lt;iyy&gt;1&lt;/iyy&gt;&lt;iyz&gt;0.0&lt;/iyz&gt;<br>          &lt;izz&gt;1&lt;/izz&gt;<br>        &lt;/inertia&gt;<br>      &lt;/inertial&gt;<br><br>      &lt;!-- collision & visual both use the same mesh --&gt;<br>      &lt;collision name="collision"&gt;<br>        &lt;geometry&gt;<br>          &lt;mesh&gt;<br>            &lt;uri&gt;model://taxi_holo_ROS_harmonic/meshes/taxi_holo.obj&lt;/uri&gt;<br>          &lt;/mesh&gt;<br>        &lt;/geometry&gt;<br>      &lt;/collision&gt;<br>      &lt;visual name="visual"&gt;<br>        &lt;geometry&gt;<br>          &lt;mesh&gt;<br>            &lt;uri&gt;model://taxi_holo_ROS_harmonic/meshes/taxi_holo.obj&lt;/uri&gt;<br>          &lt;/mesh&gt;<br>        &lt;/geometry&gt;<br>      &lt;/visual&gt;<br>    &lt;/link&gt;<br><br>    &lt;!-- VelocityControl plugin: applies Twist directly to the chassis link --&gt;<br>    &lt;plugin<br>      filename="gz-sim-velocity-control-system"<br>      name="gz::sim::systems::VelocityControl"&gt;<br><br>      &lt;topic&gt;/taxi_holo/cmd_vel&lt;/topic&gt;<br><br>    &lt;/plugin&gt;<br><br>    &lt;plugin<br>      filename="gz-sim-odometry-publisher-system"<br>      name="gz::sim::systems::OdometryPublisher"&gt;<br>      &lt;odom_topic&gt;/taxi_holo/odom&lt;/odom_topic&gt;<br>      &lt;robot_base_frame&gt;taxi_holo&lt;/robot_base_frame&gt;<br>      &lt;odom_frame&gt;odom&lt;/odom_frame&gt;<br>      &lt;odom_publish_frequency&gt;20&lt;/odom_publish_frequency&gt;<br>      &lt;dimensions&gt;3&lt;/dimensions&gt;<br>    &lt;/plugin&gt;<br><br>  &lt;/model&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/taxi_navigator/params/taxi_holo_ROS_harmonic.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes a los plugins publicador y 
            subscriptor del DiffDrive (<strong>/taxi_holo/odom</strong> y 
            <strong>/taxi_holo/cmd_vel</strong>):
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "/taxi_holo/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/taxi_holo/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            La única modificación realizada en este fichero es la adición de las líneas 
            <strong>taxi_navigator/launch</strong>, <strong>taxi_navigator/params</strong> y 
            <strong>taxi_navigator/worlds</strong>, para que el fichero que se acaba de crear 
            (<strong>taxi_holo_ROS_harmonic.yaml</strong>), se tenga en cuenta a la hora de 
            lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # GLOBAL_NAVIGATION<br>    taxi_navigator/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # GLOBAL_NAVIGATION<br>    taxi_navigator/launch<br>    taxi_navigator/models<br>    taxi_navigator/worlds<br>    taxi_navigator/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/global_navigation/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong>global_navigation/</strong>, y a su vez dentro 
            de él el fichero <strong>spawn_robot.launch.py</strong>, habría que coger cualquier
            fichero con el mismo nombre de otro ejercicio que ya esté migrado a Gazebo Harmonic,
            copiar su contenido y comentar todo lo relativo a las variables 
            <strong>start_gazebo_ros_image_bridge_cmd</strong> y 
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a la variable 
            <strong>bridge_params</strong> (en este caso, 
            <strong>taxi_holo_ROS_harmonic.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "taxi_holo_ROS_harmonic"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "taxi_holo_ROS_harmonic.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_image_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/image_raw"],<br>    #     output="screen",<br>    # )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/taxi_navigator.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que hacer un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar las 
            líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza 
            este ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    robot_launch_dir = "/opt/jderobot/Launchers/global_navigation"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br>    world_file_name = "taxi_navigation_city_large.world"<br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong>global_navigation/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/taxi_navigation_city_large.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir todos
            aquellos flags &lt;include&gt; de la versión antigua por aquellos que aparezcan en 
            la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br><br>&lt;sdf version="1.9"&gt;<br>&lt;world name="default"&gt;<br>    &lt;plugin<br>        filename="gz-sim-physics-system"<br>        name="gz::sim::systems::Physics"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>        filename="gz-sim-scene-broadcaster-system"<br>        name="gz::sim::systems::SceneBroadcaster"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>        filename="gz-sim-user-commands-system"<br>        name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>        filename="gz-sim-sensors-system"<br>        name="gz::sim::systems::Sensors"&gt;<br>        &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;scene&gt;<br>      &lt;background&gt;0.008 0.008 0.012&lt;/background&gt;<br>      &lt;shadows&gt;true&lt;/shadows&gt;<br>      &lt;grid&gt;false&lt;/grid&gt;<br>    &lt;/scene&gt;<br><br>    &lt;light type="directional" name="sun"&gt;<br>      &lt;cast_shadows&gt;0&lt;/cast_shadows&gt;<br>      &lt;pose&gt;0 0 100 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;1 1 1 1&lt;/diffuse&gt;<br>      &lt;specular&gt;1 1 1 1&lt;/specular&gt;<br>      &lt;direction&gt;0 0 -1&lt;/direction&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>    &lt;!-- Black Ground Plane --&gt;<br>    &lt;model name="ground_plane"&gt;<br>        &lt;static&gt;true&lt;/static&gt;<br>        &lt;link name="link"&gt;<br>            &lt;collision name="collision"&gt;<br>                &lt;geometry&gt;<br>                    &lt;plane&gt;<br>                        &lt;normal&gt;0 0 1&lt;/normal&gt;<br>                        &lt;size&gt;500 500&lt;/size&gt;<br>                    &lt;/plane&gt;<br>                &lt;/geometry&gt;<br>            &lt;/collision&gt;<br>            &lt;visual name="visual"&gt;<br>                &lt;geometry&gt;<br>                    &lt;plane&gt;<br>                        &lt;normal&gt;0 0 1&lt;/normal&gt;<br>                        &lt;size&gt;500 500&lt;/size&gt;<br>                    &lt;/plane&gt;<br>                &lt;/geometry&gt;<br>                &lt;material&gt;<br>                    &lt;ambient&gt;0 0 0 1&lt;/ambient&gt;<br>                    &lt;diffuse&gt;0 0 0 1&lt;/diffuse&gt;<br>                &lt;/material&gt;<br>            &lt;/visual&gt;<br>        &lt;/link&gt;<br>    &lt;/model&gt;<br>    &lt;!-- My city --&gt;<br>    &lt;include&gt;<br>        &lt;pose&gt;0 0 -0.5 0 0 0&lt;/pose&gt;<br>        &lt;uri&gt;model://cityLarge_harmonic&lt;/uri&gt;<br>    &lt;/include&gt;<br>    &lt;!-- My robots --&gt;<br>    &lt;include&gt;<br>        &lt;pose&gt;0 0 0.1 1.5529944 0 -1.5529944&lt;/pose&gt;<br>        &lt;uri&gt;model://taxi_holo_ROS_harmonic&lt;/uri&gt;<br>    &lt;/include&gt;<br><br>    &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/global_nav.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato 
            son exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Dark" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#ffa726" toolbar_text_color_light="#000000" toolbar_color_dark="#ffa726" toolbar_text_color_dark="#000000" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br><br>    &lt;scene&gt;scene&lt;/scene&gt;<br><br>    &lt;ambient_light&gt;1 1 1&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0 0 0&lt;/background_color&gt;<br>    &lt;camera_pose&gt;0 0 80 3.14 1.5529944 0&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- &lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt; --&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Global Navigation) y cambiar el valor de 
            la columna <strong>type</strong> de <strong>gazebo</strong> a <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>8	City Large	/opt/jderobot/Launchers/taxi_navigator.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>8	City Large	/opt/jderobot/Launchers/taxi_navigator.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/global_nav.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>global-navigation-migration</strong>. Es importante hacer esto siempre para 
            así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i global-navigation-migration</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio <strong>Global Navigation</strong> 
            al lanzar el Docker de RoboticsAcademy con todos estos cambios realizados:
        </p>
        <p>
        <div style="place-items: center">
            <img src="images/semana07/global_navigation_image.png" alt="Global Navigation Image" class="screenshot">
        </div>
        </p>
        <p>
            Además, para verificar que tanto la ciudad como el taxi han sido migrados 
            correctamente, se muestra una pequeña animación del taxi moviéndose en línea 
            recta para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana07/global_navigation_image.png">
            <source src="videos/semana07/global_navigation_video.mp4" type="video/mp4">
        </video>

    </div>

    <!-- Entrada de blog (semana 08): Migración del ejercicio Autoparking a Gazebo Harmonic -->
    <div id="entry-8" class="entry">
        <p class="date">SEMANA 08: 10-11-2025 al 14-11-2025</p>

        <h1>
            Migración del ejercicio Autoparking a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Global Navigation ya migrado por completo a Gazebo Harmonic, 
            se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo Harmonic de un 
            tercer ejercicio, en este caso, <strong>Autoparking</strong>, que consiste en la 
            implementación de la lógica de un algoritmo de navegación en un vehículo autónomo 
            que se encuentra buscando aparcamiento.
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/AutonomousCars/autoparking/" target="_blank">
                <img src="images/semana08/autoparking_exercise.png" alt="Autoparking Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/autopark_harmonic/models/prius_autoparking_3laser_harmonic/model.sdf
        </strong></p>
        <p>
            En este caso, no ha sido necesario llevar a cabo ninguna modificación en este 
            fichero, ya que el coche utilizado para esta versión ya se encuentra migrado a 
            Gazebo Harmonic.
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana08/model.sdf" target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana08/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/autopark_harmonic/params/prius_autoparking_3laser_harmonic.yaml
        </strong></p>
        <p>
            Estos ficheros se crean de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes al plugin publicador y 
            subscriptor del DiffDrive (<strong>/prius_autoparking/odom</strong> y 
            <strong>/prius_autoparking/cmd_vel</strong>), y los plugin publicadores de los 3 
            sensores láser LIDAR (<strong>/prius_autoparking/scan_front</strong>, 
            <strong>/prius_autoparking/scan_side</strong> y 
            <strong>/prius_autoparking/scan_back</strong>).
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "/prius_autoparking/odom"<br>  gz_topic_name: "/prius_autoparking/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "/prius_autoparking/cmd_vel"<br>  gz_topic_name: "/prius_autoparking/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/prius_autoparking/scan_front"<br>  gz_topic_name: "/prius_autoparking/scan_front"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/prius_autoparking/scan_side"<br>  gz_topic_name: "/prius_autoparking/scan_side"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/prius_autoparking/scan_back"<br>  gz_topic_name: "/prius_autoparking/scan_back"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de las líneas <strong>autopark_harmonic/launch</strong>, 
            <strong>autopark_harmonic/models</strong>, <strong>autopark_harmonic/params</strong> 
            y <strong>autopark_harmonic/worlds</strong> para que el fichero que se acaba de crear
            (<strong>prius_autoparking_3laser_harmonic.yaml</strong>), se tenga en cuenta a la 
            hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # AUTOPARK_HARMONIC<br>    autopark_harmonic/launch<br>    autopark_harmonic/models<br>    autopark_harmonic/params<br>    autopark_harmonic/worlds<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/autopark_line/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/autopark_battery/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/autopark_sideways/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creados los directorios <strong>autopark_line/</strong>,
            <strong>autopark_battery/</strong> y <strong>autopark_sideways/</strong>, y a su vez 
            dentro de cada uno de ellos el mismo fichero <strong>spawn_robot.launch.py</strong>, 
            habría que coger cualquier fichero con el mismo nombre de otro ejercicio que ya 
            esté migrado a Gazebo Harmonic, copiar su contenido y comentar todo lo relativo a 
            las variables <strong>start_gazebo_ros_image_bridge_cmd</strong> y 
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a bridge_params (en este caso, 
            <strong>prius_autoparking_3laser_harmonic.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "prius_autoparking_3laser_harmonic"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "prius_autoparking_3laser_harmonic.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_image_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/image_raw"],<br>    #     output="screen",<br>    # )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/autopark_line.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/autopark_battery.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/autopark_sideways.launch.py
        </strong></p>
        <p>
            Para estos ficheros, habría que hacer un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            las líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentra el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza 
            este ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    # FICHERO RoboticsInfrastructure/Launchers/autopark_line.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/autopark_line"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/autopark_battery.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/autopark_battery"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/autopark_sideways.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/autopark_sideways"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br><br>    # FICHERO RoboticsInfrastructure/Launchers/autopark_line.launch.py<br>    world_file_name = "autopark_line.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/autopark_battery.launch.py<br>    world_file_name = "autopark_battery.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/autopark_sideways.launch.py<br>    world_file_name = "autopark_sideways.world"<br><br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se hayan creado dentro de los 
            directorios <strong>autopark_line/</strong>, <strong>autopark_battery/</strong> y
            <strong>autopark_sideways/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/autopark_line.world<br>FICHERO RoboticsInfrastructure/Worlds/autopark_battery.world<br>FICHERO RoboticsInfrastructure/Worlds/autopark_sideways.world
        </strong></p>
        <p>
            En estos ficheros, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana08/autopark.world"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana08/autopark.world</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/autoparking.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son 
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#ffa726" toolbar_text_color_light="#000000" toolbar_color_dark="#ffa726" toolbar_text_color_dark="#000000" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="true"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;-17 0 10 0 0.7138 0.09599&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- &lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt; --&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Autoparking) y cambiar el valor de la 
            columna <strong>type</strong> de <strong>gazebo</strong> a <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>39	Autopark_line	/opt/jderobot/Launchers/autopark_line.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>40	Autopark_battery	/opt/jderobot/Launchers/autopark_battery.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>41	Autopark_sideways	/opt/jderobot/Launchers/autopark_sideways.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>39	Autopark_line	/opt/jderobot/Launchers/autopark_line.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/autoparking.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>40	Autopark_battery	/opt/jderobot/Launchers/autopark_battery.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/autoparking.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>41	Autopark_sideways	/opt/jderobot/Launchers/autopark_sideways.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/autoparking.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>autopark_harmonic</strong>. Es importante hacer esto 
            siempre para así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i autopark_harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio <strong>Autoparking</strong> 
            al lanzar el Docker de RoboticsAcademy con todos estos cambios realizados:
        </p>
        
        <strong>IMAGEN UNIBOTICS GAZEBO AUTOPARK_LINE</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana08/autoparking_line_image.png" alt="Autoparking Line Image" class="screenshot">
        </div>
        </p>

        <strong>IMAGEN UNIBOTICS GAZEBO AUTOPARK_BATTERY</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana08/autoparking_battery_image.png" alt="Autoparking Battery Image" class="screenshot">
        </div>
        </p>

        <strong>IMAGEN UNIBOTICS GAZEBO AUTOPARK_SIDEWAYS</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana08/autoparking_sideways_image.png" alt="Autoparking Sideways Image" class="screenshot">
        </div>
        </p>

        <p>
            Además, para verificar que tanto los diferentes parkings como el coche han sido 
            migrados correctamente, se muestra una pequeña animación del coche moviéndose en 
            línea recta para verificar que todo el proceso se ha realizado correctamente:
        </p>

        <strong>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO AUTOPARK_LINE<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana08/autoparking_line_image.png">
            <source src="videos/semana08/autoparking_line_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO AUTOPARK_BATTERY<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana08/autoparking_battery_image.png">
            <source src="videos/semana08/autoparking_battery_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO AUTOPARK_SIDEWAYS<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana08/autoparking_sideways_image.png">
            <source src="videos/semana08/autoparking_sideways_video.mp4" type="video/mp4">
        </video>

    </div>

    <!-- Entrada de blog (semana 09): Migración del ejercicio Follow Line a Gazebo Harmonic -->
    <div id="entry-9" class="entry">
        <p class="date">SEMANA 09: 17-11-2025 al 21-11-2025</p>

        <h1>
            Migración del ejercicio Follow Line a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Autoparking ya migrado por completo a Gazebo Harmonic, 
            se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo Harmonic de un 
            cuarto ejercicio, en este caso, <strong>Follow Line</strong>, que consiste en la 
            implementación de un controlador PID reactivo que sea capaz de seguir la línea roja 
            pintada en el suelo del circuito de carreras.
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/AutonomousCars/follow_line/" target="_blank">
                <img src="images/semana09/follow_line_exercise.png" alt="Follow Line Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/f1/models/f1_renault/model.sdf<br>FICHERO RoboticsInfrastructure/CustomRobots/ackermann_cars/models/f1_renault_camera/model.sdf
        </strong></p>
        <p>
            En este caso, no ha sido necesario llevar a cabo ninguna modificación en ninguno de 
            estos ficheros, ya que los dos coches utilizados para esta versión (tanto el coche 
            holonómico como el coche Ackermann) ya se encuentran migrados a Gazebo Harmonic.
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de estos ficheros, adjunto a continuación un enlace a cada uno de estos ficheros en
            el que se puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE MODELO COCHE HOLONÓMICO</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana09/model_holonomic.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana09/model_holonomic.sdf</a></p>
            <p><strong>ENLACE MODELO COCHE ACKERMANN</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana09/model_ackermann.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana09/model_ackermann.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/f1/params/f1_renault.yaml<br>FICHERO RoboticsInfrastructure/CustomRobots/ackermann_cars/params/f1_renault_camera.yaml
        </strong></p>
        <p>
            Estos ficheros se crean de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia.
        </p>
        <p>
            En el caso de ambos ficheros
            (fichero <strong>f1_renault.yaml</strong> y 
            <strong>f1_renault_camera.yaml</strong>), se añaden los topics 
            correspondientes a los plugins publicadores y subscriptores del DiffDrive 
            (<strong>F1ROS/odom</strong> y <strong>/F1ROS/cmd_vel</strong>) y de la cámara
            (<strong>/cam_f1_left/camera_info</strong>).
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "F1ROS/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/F1ROS/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (Camera)<br>- ros_topic_name: "/cam_f1_left/camera_info"<br>  gz_topic_name: "/cam_f1_left/camera_info"<br>  ros_type_name: "sensor_msgs/msg/CameraInfo"<br>  gz_type_name: "gz.msgs.CameraInfo"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de las línea <strong>f1/params</strong> y 
            <strong>ackermann_cars/params</strong> para que los ficheros que se acaban 
            de crear (<strong>f1_result_laser_no_cam.yaml</strong> y 
            <strong>f1_renault_camera.yaml</strong>) se tengan en cuenta a la 
            hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # F1<br>    f1/models<br>    f1/launch<br>    f1/worlds<br>    ...<br>    # ACKERMAN CAR<br>    ackermann_cars/models<br>    ackermann_cars/launch<br>    ackermann_cars/worlds<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # F1<br>    f1/models<br>    f1/launch<br>    f1/worlds<br>    f1/params<br>    ...<br>    # ACKERMAN CAR<br>    ackermann_cars/models<br>    ackermann_cars/launch<br>    ackermann_cars/worlds<br>    ackermann_cars/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/monaco_circuit/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montreal_circuit/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/simple_circuit/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/monaco_circuit_ackermann/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit_ackermann/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montreal_circuit_ackermann/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit_ackermann/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/simple_circuit_ackermann/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creados los directorios <strong>monaco_circuit/</strong>, 
            <strong>montmelo_circuit/</strong>, <strong>montreal_circuit/</strong>, 
            <strong>nurburgring_circuit/</strong>, <strong>simple_circuit/</strong>, 
            <strong>monaco_circuit_ackermann/</strong>, 
            <strong>montmelo_circuit_ackermann/</strong>, 
            <strong>montreal_circuit_ackermann/</strong>, 
            <strong>nurburgring_circuit_ackermann/</strong> y 
            <strong>simple_circuit_ackermann/</strong>, y a su vez dentro de cada uno de ellos 
            el fichero <strong>spawn_robot.launch.py</strong>, habría que coger cualquier 
            fichero con el mismo nombre de otro ejercicio que ya esté migrado a Gazebo Harmonic,
            copiar su contenido y comentar todo lo relativo a la variable
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a bridge_params (en este caso, 
            <strong>f1_renault.yaml</strong> y 
            <strong>f1_renault_camera.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br><br>    # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/simple_circuit/spawn_robot.launch.py<br>    model_folder = "f1_renault"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit_ackermann/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit_ackermann/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit_ackermann/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit_ackermann/spawn_robot.launch.py<br>    # FICHERO RoboticsInfrastructure/Launchers/simple_circuit_ackermann/spawn_robot.launch.py<br>    model_folder = "f1_renault_camera"<br><br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br><br>        # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/simple_circuit/spawn_robot.launch.py<br>        get_package_share_directory("custom_robots"), "params", "f1_renault.yaml"<br><br>        # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit_ackermann/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit_ackermann/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit_ackermann/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit_ackermann/spawn_robot.launch.py<br>        # FICHERO RoboticsInfrastructure/Launchers/simple_circuit_ackermann/spawn_robot.launch.py<br>        get_package_share_directory("custom_robots"), "params", "f1_renault_camera.yaml"<br><br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    start_gazebo_ros_image_bridge_cmd = Node(<br>        package="ros_gz_image",<br>        executable="image_bridge",<br>        arguments=["/cam_f1_left/image_raw"],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/monaco_circuit.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montreal_circuit.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/simple_circuit.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/monaco_circuit_ackermann.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit_ackermann.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/montreal_circuit_ackermann.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit_ackermann.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/simple_circuit_ackermann.launch.py
        </strong></p>
        <p>
            Para estos ficheros, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con 
            el mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            las líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza este 
            ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/monaco_circuit"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/montmelo_circuit"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/montreal_circuit"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/nurburgring_circuit"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/simple_circuit.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/simple_circuit"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit_ackermann.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/monaco_circuit_ackermann"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit_ackermann.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/montmelo_circuit_ackermann"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit_ackermann.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/montreal_circuit_ackermann"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit_ackermann.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/nurburgring_circuit_ackermann"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/simple_circuit_ackermann.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/simple_circuit_ackermann"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br><br>    # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit.launch.py<br>    world_file_name = "monaco_line.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit.launch.py<br>    world_file_name = "montmelo_line.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit.launch.py<br>    world_file_name = "montreal_line.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit.launch.py<br>    world_file_name = "nurburgring_line.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/simple_circuit.launch.py<br>    world_file_name = "simple_circuit.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/monaco_circuit_ackermann.launch.py<br>    world_file_name = "monaco_line_ackermann.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montmelo_circuit_ackermann.launch.py<br>    world_file_name = "montmelo_line_ackermann.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/montreal_circuit_ackermann.launch.py<br>    world_file_name = "montreal_line_ackermann.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/nurburgring_circuit_ackermann.launch.py<br>    world_file_name = "nurburgring_line_ackermann.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/simple_circuit_ackermann.launch.py<br>    world_file_name = "simple_circuit_ackermann.world"<br><br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro de los directorios 
            <strong>monaco_circuit/</strong>, <strong>montmelo_circuit/</strong>, 
            <strong>montreal_circuit/</strong>, <strong>nurburgring_circuit/</strong>, 
            <strong>simple_circuit/</strong>, <strong>monaco_circuit_ackermann/</strong>
            <strong>montmelo_circuit_ackermann/</strong>, 
            <strong>montreal_circuit_ackermann/</strong>, 
            <strong>nurburgring_circuit_ackermann/</strong> o
            <strong>simple_circuit_ackermann/</strong>, el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/monaco_line.world<br>FICHERO RoboticsInfrastructure/Worlds/montmelo_line.world<br>FICHERO RoboticsInfrastructure/Worlds/montreal_line.world<br>FICHERO RoboticsInfrastructure/Worlds/nurburgring_line.world<br>FICHERO RoboticsInfrastructure/Worlds/simple_circuit.world<br>FICHERO RoboticsInfrastructure/Worlds/monaco_line_ackermann.world<br>FICHERO RoboticsInfrastructure/Worlds/montmelo_line_ackermann.world<br>FICHERO RoboticsInfrastructure/Worlds/montreal_line_ackermann.world<br>FICHERO RoboticsInfrastructure/Worlds/nurburgring_line_ackermann.world<br>FICHERO RoboticsInfrastructure/Worlds/simple_circuit_ackermann.world
        </strong></p>
        <p>
            En estos ficheros, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0" ?&gt;<br>&lt;sdf version="1.10"&gt;<br>  &lt;world name="default"&gt;<br><br>    &lt;plugin name="gz::sim::systems::Physics" filename="gz-sim-physics-system"/&gt;<br>    &lt;plugin name="gz::sim::systems::SceneBroadcaster" filename="gz-sim-scene-broadcaster-system"/&gt;<br>    &lt;plugin<br>      filename="gz-sim-user-commands-system"<br>      name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-sensors-system"<br>      name="gz::sim::systems::Sensors"&gt;<br>      &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;<br>    &lt;atmosphere type="adiabatic"/&gt;<br><br>    &lt;scene&gt;<br>      &lt;ambient&gt;0.4 0.4 0.4 1&lt;/ambient&gt;<br>      &lt;background&gt;0.7 0.7 0.7 1&lt;/background&gt;<br>      &lt;shadows&gt;true&lt;/shadows&gt;<br>    &lt;/scene&gt;<br><br>    &lt;!-- Circuito --&gt;<br>    &lt;include&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/monaco_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/monaco_line_ackermann.world --&gt;<br>      &lt;uri&gt;model://monaco&lt;/uri&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montmelo_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montmelo_line_ackermann.world --&gt;<br>      &lt;uri&gt;model://montmelo_line&lt;/uri&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montreal_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montreal_line_ackermann.world --&gt;<br>      &lt;uri&gt;model://montreal_line&lt;/uri&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/nurburgring_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/nurburgring_line_ackermann.world --&gt;<br>      &lt;uri&gt;model://nurburgring_line&lt;/uri&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/simple_circuit.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/simple_circuit_ackermann.world --&gt;<br>      &lt;uri&gt;model://simple_circuit&lt;/uri&gt;<br><br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;!-- Coche --&gt;<br>    &lt;include&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/monaco_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montmelo_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montreal_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/nurburgring_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/simple_circuit.world --&gt;<br>      &lt;uri&gt;model://f1_renault&lt;/uri&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/monaco_line_ackermann.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montmelo_line_ackermann.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montreal_line_ackermann.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/nurburgring_line_ackermann.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/simple_circuit_ackermann.world --&gt;<br>      &lt;uri&gt;model://f1_renault_camera&lt;/uri&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/monaco_line.world --&gt;<br>      &lt;pose&gt;-105.223 -70.77 -1.8 0 0 1.69&lt;/pose&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/monaco_line_ackermann.world --&gt;<br>      &lt;pose&gt;-105.223 -70.77 -1.8 0 0 0.12&lt;/pose&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montmelo_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montmelo_line_ackermann.world --&gt;<br>      &lt;pose&gt;27.18 -31.55 0.00 0.00 0.01 -3.12&lt;/pose&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montreal_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/montreal_line_ackermann.world --&gt;<br>      &lt;pose&gt;-200.88 -90.72 0.00 0.00 0.00 -2.83&lt;/pose&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/nurburgring_line.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/nurburgring_line_ackermann.world --&gt;<br>      &lt;pose&gt;-74.29 37.74 0 0 0 -0.51&lt;/pose&gt;<br><br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/simple_circuit.world --&gt;<br>      &lt;!-- FICHERO RoboticsInfrastructure/Worlds/simple_circuit_ackermann.world --&gt;<br>      &lt;pose&gt;53.462 -10.734 0.004 0 0 -1.57&lt;/pose&gt;<br><br>    &lt;/include&gt;<br><br>    &lt;!-- Luz --&gt;<br>    &lt;light name="sun" type="directional"&gt;<br>      &lt;pose&gt;0 0 10 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;0.8 0.8 0.8 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.2 0.2 0.2 1&lt;/specular&gt;<br>      &lt;direction&gt;-0.5 0.1 -0.9&lt;/direction&gt;<br>      &lt;cast_shadows&gt;true&lt;/cast_shadows&gt;<br>    &lt;/light&gt;<br><br>  &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/follow_line.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#ffa726" toolbar_text_color_light="#000000" toolbar_color_dark="#ffa726" toolbar_text_color_dark="#000000" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;-2 0 2 0 0.4 0&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Follow Line) y cambiar el valor de la 
            columna <strong>type</strong> de <strong>gazebo</strong> a <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>13	Montmelo Ackermann Circuit	/opt/jderobot/Launchers/montmelo_circuit_ackermann.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>14	Montmelo Circuit	/opt/jderobot/Launchers/montmelo_circuit.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>15	Montreal Ackermann Circuit	/opt/jderobot/Launchers/montreal_circuit_ackermann.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>16	Montreal Circuit	/opt/jderobot/Launchers/montreal_circuit.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>17	Nurburgring Ackermann Circuit	/opt/jderobot/Launchers/nurburgring_circuit_ackermann.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>18	Nurburgring Circuit	/opt/jderobot/Launchers/nurburgring_circuit.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>22	Simple Ackermann Circuit	/opt/jderobot/Launchers/simple_circuit_ackermann.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>23	Simple Circuit	/opt/jderobot/Launchers/simple_circuit.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>41	Monaco Ackermann Circuit	/opt/jderobot/Launchers/monaco_circuit_ackermann.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>42	Monaco Circuit	/opt/jderobot/Launchers/monaco_circuit.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>13	Montmelo Ackermann Circuit	/opt/jderobot/Launchers/montmelo_circuit_ackermann.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>14	Montmelo Circuit	/opt/jderobot/Launchers/montmelo_circuit.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>15	Montreal Ackermann Circuit	/opt/jderobot/Launchers/montreal_circuit_ackermann.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>16	Montreal Circuit	/opt/jderobot/Launchers/montreal_circuit.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>17	Nurburgring Ackermann Circuit	/opt/jderobot/Launchers/nurburgring_circuit_ackermann.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>18	Nurburgring Circuit	/opt/jderobot/Launchers/nurburgring_circuit.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>22	Simple Ackermann Circuit	/opt/jderobot/Launchers/simple_circuit_ackermann.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>23	Simple Circuit	/opt/jderobot/Launchers/simple_circuit.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>41	Monaco Ackermann Circuit	/opt/jderobot/Launchers/monaco_circuit_ackermann.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>42	Monaco Circuit	/opt/jderobot/Launchers/monaco_circuit.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_line.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>harmonic-follow-line-tests</strong>. Es importante hacer esto siempre para 
            así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i harmonic-follow-line-tests</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio <strong>Follow Line</strong> 
            al lanzar el Docker de RoboticsAcademy con todos estos cambios realizados:
        </p>

        <strong>IMAGEN UNIBOTICS GAZEBO MONACO_CIRCUIT<br>IMAGEN UNIBOTICS GAZEBO MONACO_CIRCUIT_ACKERMANN</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana09/monaco_circuit_image.png" alt="Monaco Circuit Image" class="screenshot">
        </div>
        </p>

        <strong>IMAGEN UNIBOTICS GAZEBO MONTMELO_CIRCUIT<br>IMAGEN UNIBOTICS GAZEBO MONTMELO_CIRCUIT_ACKERMANN</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana09/montmelo_circuit_image.png" alt="Montmelo Circuit Image" class="screenshot">
        </div>
        </p>

        <strong>IMAGEN UNIBOTICS GAZEBO MONTREAL_CIRCUIT<br>IMAGEN UNIBOTICS GAZEBO MONTREAL_CIRCUIT_ACKERMANN</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana09/montreal_circuit_image.png" alt="Montreal Circuit Image" class="screenshot">
        </div>
        </p>

        <strong>IMAGEN UNIBOTICS GAZEBO NURBURGRING_CIRCUIT<br>IMAGEN UNIBOTICS GAZEBO NURBURGRING_CIRCUIT_ACKERMANN</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana09/nurburgring_circuit_image.png" alt="Nurburgring Circuit Image" class="screenshot">
        </div>
        </p>

        <strong>IMAGEN UNIBOTICS GAZEBO SIMPLE_CIRCUIT<br>IMAGEN UNIBOTICS GAZEBO SIMPLE_CIRCUIT_ACKERMANN</strong>
        <p>
        <div style="place-items: center">
            <img src="images/semana09/simple_circuit_image.png" alt="Simple Circuit Image" class="screenshot">
        </div>
        </p>

        <p>
            Además, para verificar que tanto los circuitos como los coches han sido migrados 
            correctamente, se muestra una pequeña animación del coche moviéndose en línea 
            recta para verificar que todo el proceso se ha realizado correctamente:
        </p>

        <strong>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO MONACO_CIRCUIT<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/monaco_circuit_image.png">
            <source src="videos/semana09/monaco_circuit_video.mp4" type="video/mp4">
        </video>

        <strong>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO MONTMELO_CIRCUIT<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/montmelo_circuit_image.png">
            <source src="videos/semana09/montmelo_circuit_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO MONTREAL_CIRCUIT<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/montreal_circuit_image.png">
            <source src="videos/semana09/montreal_circuit_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO NURBURGRING_CIRCUIT<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/nurburgring_circuit_image.png">
            <source src="videos/semana09/nurburgring_circuit_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO SIMPLE_CIRCUIT<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/simple_circuit_image.png">
            <source src="videos/semana09/simple_circuit_video.mp4" type="video/mp4">
        </video>

        <strong>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO MONACO_CIRCUIT_ACKERMANN<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/monaco_circuit_image.png">
            <source src="videos/semana09/monaco_circuit_ackermann_video.mp4" type="video/mp4">
        </video>

        <strong>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO MONTMELO_CIRCUIT_ACKERMANN<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/montmelo_circuit_image.png">
            <source src="videos/semana09/montmelo_circuit_ackermann_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO MONTREAL_CIRCUIT_ACKERMANN<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/montreal_circuit_image.png">
            <source src="videos/semana09/montreal_circuit_ackermann_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO NURBURGRING_CIRCUIT_ACKERMANN<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/nurburgring_circuit_image.png">
            <source src="videos/semana09/nurburgring_circuit_ackermann_video.mp4" type="video/mp4">
        </video>

        <strong><br>VÍDEO DEL COCHE MOVIÉNDOSE POR EL ESCENARIO SIMPLE_CIRCUIT_ACKERMANN<br><br></strong>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana09/simple_circuit_image.png">
            <source src="videos/semana09/simple_circuit_ackermann_video.mp4" type="video/mp4">
        </video>

    </div>

    <!-- Entrada de blog (semana 10): Migración del ejercicio Basic Vacuum Cleaner a Gazebo Harmonic -->
    <div id="entry-10" class="entry">
        <p class="date">SEMANA 10: 24-11-2025 al 28-11-2025</p>

        <h1>
            Migración del ejercicio Basic Vacuum Cleaner a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Follow Line ya migrado por completo a Gazebo Harmonic, 
            se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo Harmonic de un 
            quinto ejercicio, en este caso, <strong>Basic Vacuum Cleaner</strong>, que consiste 
            en la implementación de la lógica de un algoritmo de navegación para una aspiradora
            autónoma, cuyo objetivo principal será cubrir la mayor superficie posible de una 
            casa utilizando el algoritmo programado.
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/MobileRobots/vacuum_cleaner" target="_blank">
                <img src="images/semana10/vacum_cleaner_exercise.png" alt="Basic Vacuum Cleaner Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/models/roombaROS/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él. Además, es importante añadir al final de la nueva 
            versión los plugins correspondientes al <strong>velocity-control-system</strong>, 
            al <strong>odometry-publisher-system</strong> y al <strong>contact-system</strong>:
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana10/model.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana10/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/params/roombaROS.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes a los plugins 
            publicadores y subscriptores del diff-drive (<strong>/roombaROS/odom</strong> y 
            <strong>/roombaROS/cmd_vel</strong>), del sensor láser LIDAR
            (<strong>/roombaROS/laser/scan</strong>) y de los 3 sensores bumper de contacto
            (<strong>/roombaROS/events/center_bumper</strong>, 
            <strong>/roombaROS/events/right_bumper</strong> y 
            <strong>/roombaROS/events/left_bumper</strong>):
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "/roombaROS/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/roombaROS/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/roombaROS/laser/scan"<br>  gz_topic_name: "/roombaROS/laser/scan"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/center_bumper"<br>  gz_topic_name: "/roombaROS/events/center_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/right_bumper"<br>  gz_topic_name: "/roombaROS/events/right_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/left_bumper"<br>  gz_topic_name: "/roombaROS/events/left_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de la línea <strong>roomba_robot/params</strong> para que el 
            fichero que se acaba de crear (<strong>roombaROS.yaml</strong>) 
            se tenga en cuenta a la hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    roomba_robot/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/basic_vacuum_cleaner/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong>basic_vacuum_cleaner/</strong>, y a su vez 
            dentro de él el fichero <strong>spawn_robot.launch.py</strong>, habría que 
            coger cualquier fichero con el mismo nombre de otro ejercicio que ya esté 
            migrado a Gazebo Harmonic, copiar su contenido y comentar todo 
            lo relativo a las variables <strong>start_gazebo_ros_image_bridge_cmd</strong> y 
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a bridge_params (en este caso, 
            <strong>roombaROS.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "roombaROS"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "roombaROS.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_image_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/image_raw"],<br>    #     output="screen",<br>    # )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/vacuum_cleaner.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar las 
            líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza este 
            ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    robot_launch_dir = "/opt/jderobot/Launchers/basic_vacuum_cleaner"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br>    world_file_name = "roomba_1_house_harmonic.world"<br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong>basic_vacuum_cleaner/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/roomba_1_house_harmonic.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0" ?&gt;<br><br>&lt;sdf version="1.8"&gt;<br>  &lt;world name="default"&gt;<br>    &lt;plugin<br>      filename="gz-sim-physics-system"<br>      name="gz::sim::systems::Physics"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-user-commands-system"<br>      name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-scene-broadcaster-system"<br>      name="gz::sim::systems::SceneBroadcaster"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-sensors-system"<br>      name="gz::sim::systems::Sensors"&gt;<br>      &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;scene&gt;<br>      &lt;ambient&gt;0.4 0.4 0.4 1&lt;/ambient&gt;<br>      &lt;background&gt;0.7 0.7 0.7 1&lt;/background&gt;<br>      &lt;shadows&gt;true&lt;/shadows&gt;<br>      &lt;grid&gt;false&lt;/grid&gt;<br>    &lt;/scene&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://roombaROS&lt;/uri&gt;<br>      &lt;pose&gt;-1 1.5 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://house_int2&lt;/uri&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;light type="directional" name="sun"&gt;<br>      &lt;cast_shadows&gt;1&lt;/cast_shadows&gt;<br>      &lt;pose&gt;0 0 10 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;0.8 0.8 0.8 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.2 0.2 0.2 1&lt;/specular&gt;<br>      &lt;direction&gt;-0.5 0.1 -0.9&lt;/direction&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>  &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/vacuum_house.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son 
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#f3f3f3" toolbar_text_color_light="#111111" toolbar_color_dark="#414141" toolbar_text_color_dark="#f3f3f3" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;0 3.5 19 0.00 1.57 -1.57&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Basic Vacuum Cleaner) y cambiar el valor 
            de la columna <strong>type</strong> de <strong>gazebo</strong> a 
            <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>24	Vacuums House	/opt/jderobot/Launchers/vacuum_cleaner.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>24	Vacuums House	/opt/jderobot/Launchers/vacuum_cleaner.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/vacuum_house.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>basic-vacuum-cleaner-harmonic</strong>. Es importante hacer esto siempre 
            para así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i basic-vacuum-cleaner-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio 
            <strong>Basic Vacuum Cleaner</strong> al lanzar el Docker de RoboticsAcademy con 
            todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semana10/vacum_cleaner_image.png" alt="Basic Vacuum Cleaner Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto la casa como la aspiradora han sido migrados 
            correctamente, se muestra una pequeña animación de la aspiradora moviéndose
            para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana10/vacum_cleaner_image.png">
            <source src="videos/semana10/vacum_cleaner_video.mp4" type="video/mp4">
        </video>

    </div>

    <!-- Entrada de blog (semana 11): Migración del ejercicio Localized Vacuum Cleaner a Gazebo Harmonic -->
    <div id="entry-11" class="entry">
        <p class="date">SEMANA 11: 01-12-2025 al 05-12-2025</p>

        <h1>
            Migración del ejercicio Localized Vacuum Cleaner a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Basic Vacuum Cleaner ya migrado por completo a Gazebo Harmonic, 
            se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo Harmonic de un 
            sexto ejercicio, en este caso, <strong>Localized Vacuum Cleaner</strong>, que 
            consiste en implementar la lógica de un algoritmo de navegación para una aspiradora 
            autónoma utilizando la ubicación del robot, donde el robot está equipado con un 
            mapa y conoce su ubicación actual en él, cuyo objetivo principal será cubrir la 
            mayor superficie posible de una casa utilizando el algoritmo programado.
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/MobileRobots/vacuum_cleaner_loc" target="_blank">
                <img src="images/semana11/localized_vacuum_cleaner_exercise.png" alt="Localized Vacuum Cleaner Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/models/roombaROS/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él. Además, es importante añadir al final de la nueva 
            versión los plugins correspondientes al <strong>velocity-control-system</strong>, 
            al <strong>odometry-publisher-system</strong> y al <strong>contact-system</strong>:
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana11/model.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana11/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/params/roombaROS.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes a los plugins 
            publicadores y subscriptores del DiffDrive (<strong>/roombaROS/odom</strong> y 
            <strong>/roombaROS/cmd_vel</strong>), del sensor láser LIDAR
            (<strong>/roombaROS/laser/scan</strong>) y de los 3 sensores bumper de contacto
            (<strong>/roombaROS/events/center_bumper</strong>, 
            <strong>/roombaROS/events/right_bumper</strong> y 
            <strong>/roombaROS/events/left_bumper</strong>):
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "/roombaROS/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/roombaROS/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/roombaROS/laser/scan"<br>  gz_topic_name: "/roombaROS/laser/scan"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/center_bumper"<br>  gz_topic_name: "/roombaROS/events/center_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/right_bumper"<br>  gz_topic_name: "/roombaROS/events/right_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/left_bumper"<br>  gz_topic_name: "/roombaROS/events/left_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de la línea <strong>roomba_robot/params</strong> para que el 
            fichero que se acaba de crear (<strong>roombaROS.yaml</strong>) 
            se tenga en cuenta a la hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    roomba_robot/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/localized_vacuum_cleaner/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong>localized_vacuum_cleaner/</strong>, y a su vez 
            dentro de él el fichero <strong>spawn_robot.launch.py</strong>, habría que coger 
            cualquier fichero con el mismo nombre de otro ejercicio que ya esté migrado a 
            Gazebo Harmonic, copiar su contenido y comentar todo lo relativo a las variables 
            <strong>start_gazebo_ros_image_bridge_cmd</strong> y 
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a bridge_params (en este caso, 
            <strong>roombaROS.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "roombaROS"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "roombaROS.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_image_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/image_raw"],<br>    #     output="screen",<br>    # )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/vacuum_cleaner.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            las líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza 
            este ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    robot_launch_dir = "/opt/jderobot/Launchers/localized_vacuum_cleaner"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br>    world_file_name = "roomba_1_house_harmonic.world"<br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong>localized_vacuum_cleaner/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/roomba_1_house_harmonic.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por 
            aquellos que aparezcan en la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0" ?&gt;<br><br>&lt;sdf version="1.8"&gt;<br>  &lt;world name="default"&gt;<br>    &lt;plugin<br>      filename="gz-sim-physics-system"<br>      name="gz::sim::systems::Physics"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-user-commands-system"<br>      name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-scene-broadcaster-system"<br>      name="gz::sim::systems::SceneBroadcaster"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-sensors-system"<br>      name="gz::sim::systems::Sensors"&gt;<br>      &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;scene&gt;<br>      &lt;ambient&gt;0.4 0.4 0.4 1&lt;/ambient&gt;<br>      &lt;background&gt;0.7 0.7 0.7 1&lt;/background&gt;<br>      &lt;shadows&gt;true&lt;/shadows&gt;<br>      &lt;grid&gt;false&lt;/grid&gt;<br>    &lt;/scene&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://roombaROS&lt;/uri&gt;<br>      &lt;pose&gt;-1 1.5 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://house_int2&lt;/uri&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;light type="directional" name="sun"&gt;<br>      &lt;cast_shadows&gt;1&lt;/cast_shadows&gt;<br>      &lt;pose&gt;0 0 10 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;0.8 0.8 0.8 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.2 0.2 0.2 1&lt;/specular&gt;<br>      &lt;direction&gt;-0.5 0.1 -0.9&lt;/direction&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>  &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/vacuum_house.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son 
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#f3f3f3" toolbar_text_color_light="#111111" toolbar_color_dark="#414141" toolbar_text_color_dark="#f3f3f3" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;0 3.5 19 0.00 1.57 -1.57&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Localized Vacuum Cleaner) y cambiar el 
            valor de la columna <strong>type</strong> de <strong>gazebo</strong> a 
            <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>24	Vacuums House	/opt/jderobot/Launchers/vacuum_cleaner.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>24	Vacuums House	/opt/jderobot/Launchers/vacuum_cleaner.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/vacuum_house.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>localized-vacuum-cleaner-harmonic</strong>. Es importante hacer esto 
            siempre para así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i localized-vacuum-cleaner-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio 
            <strong>Localized Vacuum Cleaner</strong> al lanzar el Docker de RoboticsAcademy 
            con todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semana11/localized_vacuum_cleaner_image.png" alt="Localized Vacuum Cleaner Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto la casa como la aspiradora han sido migrados 
            correctamente, se muestra una pequeña animación de la aspiradora moviéndose
            para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana11/localized_vacuum_cleaner_image.png">
            <source src="videos/semana11/localized_vacuum_cleaner_video.mp4" type="video/mp4">
        </video>

    </div>
    
    <!-- Entrada de blog (semana 12): Migración del ejercicio Montecarlo Laser Localization a Gazebo Harmonic -->
    <div id="entry-12" class="entry">
        <p class="date">SEMANA 12: 08-12-2025 al 12-12-2025</p>

        <h1>
            Migración del ejercicio Montecarlo Laser Localization a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Localized Vacuum Cleaner ya migrado por completo a Gazebo 
            Harmonic, se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo 
            Harmonic de un séptimo ejercicio, en este caso, 
            <strong>Montecarlo Laser Localization</strong>, que consiste en desarrollar un 
            algoritmo de localización basado en el filtro de partículas utilizando el láser del 
            robot.
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/MobileRobots/montecarlo_laser_loc/" target="_blank">
                <img src="images/semana12/montecarlo_laser_localization_exercise.png" alt="Montecarlo Laser Localization Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/models/roombaROS/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él. Además, es importante añadir al final de la nueva 
            versión los plugins correspondientes al <strong>velocity-control-system</strong>, 
            al <strong>odometry-publisher-system</strong> y al <strong>contact-system</strong>:
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana12/model.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana12/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/params/roombaROS.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes a los plugins 
            publicadores y subscriptores del DiffDrive (<strong>/roombaROS/odom</strong> y 
            <strong>/roombaROS/cmd_vel</strong>), del sensor láser LIDAR
            (<strong>/roombaROS/laser/scan</strong>) y de los 3 sensores bumper de contacto
            (<strong>/roombaROS/events/center_bumper</strong>, 
            <strong>/roombaROS/events/right_bumper</strong> y 
            <strong>/roombaROS/events/left_bumper</strong>):
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "/roombaROS/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/roombaROS/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/roombaROS/laser/scan"<br>  gz_topic_name: "/roombaROS/laser/scan"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/center_bumper"<br>  gz_topic_name: "/roombaROS/events/center_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/right_bumper"<br>  gz_topic_name: "/roombaROS/events/right_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/left_bumper"<br>  gz_topic_name: "/roombaROS/events/left_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de la línea <strong>roomba_robot/params</strong> para que el 
            fichero que se acaba de crear (<strong>roombaROS.yaml</strong>) 
            se tenga en cuenta a la hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    roomba_robot/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/montecarlo_laser_localization/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong>montecarlo_laser_localization/</strong>, y a 
            su vez dentro de él el fichero <strong>spawn_robot.launch.py</strong>, habría que 
            coger cualquier fichero con el mismo nombre de otro ejercicio que ya esté 
            migrado a Gazebo Harmonic, copiar su contenido y comentar todo lo relativo a las 
            variables <strong>start_gazebo_ros_image_bridge_cmd</strong> y 
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a bridge_params (en este caso, 
            <strong>roombaROS.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "roombaROS"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "roombaROS.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_image_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/image_raw"],<br>    #     output="screen",<br>    # )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/vacuum_cleaner.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            únicamente las líneas correspondientes a las variables 
            <strong>robot_launch_dir</strong> y <strong>world_file_name</strong>, 
            correspondientes a las rutas en las que se encuentran el directorio que almacena el 
            fichero <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza 
            este ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    robot_launch_dir = "/opt/jderobot/Launchers/montecarlo_laser_localization"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br>    world_file_name = "roomba_1_house_harmonic.world"<br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong>montecarlo_laser_localization/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/roomba_1_house_harmonic.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0" ?&gt;<br><br>&lt;sdf version="1.8"&gt;<br>  &lt;world name="default"&gt;<br>    &lt;plugin<br>      filename="gz-sim-physics-system"<br>      name="gz::sim::systems::Physics"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-user-commands-system"<br>      name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-scene-broadcaster-system"<br>      name="gz::sim::systems::SceneBroadcaster"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-sensors-system"<br>      name="gz::sim::systems::Sensors"&gt;<br>      &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;scene&gt;<br>      &lt;ambient&gt;0.4 0.4 0.4 1&lt;/ambient&gt;<br>      &lt;background&gt;0.7 0.7 0.7 1&lt;/background&gt;<br>      &lt;shadows&gt;true&lt;/shadows&gt;<br>      &lt;grid&gt;false&lt;/grid&gt;<br>    &lt;/scene&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://roombaROS&lt;/uri&gt;<br>      &lt;pose&gt;-1 1.5 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://house_int2&lt;/uri&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;light type="directional" name="sun"&gt;<br>      &lt;cast_shadows&gt;1&lt;/cast_shadows&gt;<br>      &lt;pose&gt;0 0 10 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;0.8 0.8 0.8 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.2 0.2 0.2 1&lt;/specular&gt;<br>      &lt;direction&gt;-0.5 0.1 -0.9&lt;/direction&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>  &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/vacuum_house.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son 
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#f3f3f3" toolbar_text_color_light="#111111" toolbar_color_dark="#414141" toolbar_text_color_dark="#f3f3f3" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;0 3.5 19 0.00 1.57 -1.57&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En ets fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Montecarlo Laser Localization) y cambiar 
            el valor de la columna <strong>type</strong> de <strong>gazebo</strong> a 
            <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>24	Vacuums House	/opt/jderobot/Launchers/vacuum_cleaner.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>24	Vacuums House	/opt/jderobot/Launchers/vacuum_cleaner.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/vacuum_house.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>montecarlo-laser-localization-harmonic</strong>. Es importante hacer esto 
            siempre para así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i montecarlo-laser-localization-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio 
            <strong>Montecarlo Laser Localization</strong> al lanzar el Docker de 
            RoboticsAcademy con todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semana12/montecarlo_laser_localization_image.png" alt="Montecarlo Laser Localization Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto la casa como la aspiradora han sido migrados 
            correctamente, se muestra una pequeña animación de la aspiradora moviéndose
            para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana12/montecarlo_laser_localization_image.png">
            <source src="videos/semana12/montecarlo_laser_localization_video.mp4" type="video/mp4">
        </video>

    </div>
    
    <!-- Entrada de blog (semana 13): Migración del ejercicio Montecarlo Visual Localization a Gazebo Harmonic -->
    <div id="entry-13" class="entry">
        <p class="date">SEMANA 13: 15-12-2025 al 19-12-2025</p>

        <h1>
            Migración del ejercicio Montecarlo Visual Localization a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Montecarlo Laser Localization ya migrado por completo a Gazebo 
            Harmonic, se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo 
            Harmonic de un octavo ejercicio, en este caso, 
            <strong>Montecarlo Visual Localization</strong>, que consiste en desarrollar un 
            algoritmo de localización visual basado en el filtro de partículas.
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/ComputerVision/montecarlo_visual_loc" target="_blank">
                <img src="images/semana13/montecarlo_visual_localization_exercise.png" alt="Montecarlo Visual Localization Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/models/roombaROS_cam/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él. Además, es importante añadir al final de la nueva 
            versión los plugins correspondientes al <strong>velocity-control-system</strong>, 
            al <strong>odometry-publisher-system</strong> y al <strong>contact-system</strong>:
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana13/model.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana13/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/roomba_robot/params/roombaROS_cam.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes a los plugins 
            publicadores y subscriptores del DiffDrive (<strong>/roombaROS/odom</strong> y 
            <strong>/roombaROS/cmd_vel</strong>), del sensor láser LIDAR
            (<strong>/roombaROS/laser/scan</strong>) de los 3 sensores bumper de contacto
            (<strong>/roombaROS/events/center_bumper</strong>, 
            <strong>/roombaROS/events/right_bumper</strong> y 
            <strong>/roombaROS/events/left_bumper</strong>) y de la cámara 
            (<strong>/camera/camera_info</strong>):
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "/roombaROS/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/roombaROS/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/roombaROS/laser/scan"<br>  gz_topic_name: "/roombaROS/laser/scan"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/center_bumper"<br>  gz_topic_name: "/roombaROS/events/center_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/right_bumper"<br>  gz_topic_name: "/roombaROS/events/right_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/roombaROS/events/left_bumper"<br>  gz_topic_name: "/roombaROS/events/left_bumper"<br>  ros_type_name: "ros_gz_interfaces/msg/Contacts"<br>  gz_type_name: "gz.msgs.Contacts"<br>  direction: GZ_TO_ROS<br><br># gz topic published by Sensors plugin (Camera)<br>- ros_topic_name: "/camera/camera_info"<br>  gz_topic_name: "/camera/camera_info"<br>  ros_type_name: "sensor_msgs/msg/CameraInfo"<br>  gz_type_name: "gz.msgs.CameraInfo"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de la línea <strong>roomba_robot/params</strong> para que el 
            fichero que se acaba de crear (<strong>roombaROS_cam.yaml</strong>) 
            se tenga en cuenta a la hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # ROOMBA<br>    roomba_robot/models<br>    roomba_robot/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/montecarlo_visual_localization/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong>montecarlo_visual_localization/</strong>, y a 
            su vez dentro de él el fichero <strong>spawn_robot.launch.py</strong>, habría que 
            coger cualquier fichero con el mismo nombre de otro ejercicio que ya esté 
            migrado a Gazebo Harmonic, copiar su contenido y comentar todo lo relativo a la 
            variable <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, 
            modificar el nombre del fichero que se le pasa como argumento a bridge_params 
            (en este caso, <strong>roombaROS_cam.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "roombaROS_cam"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "roombaROS_cam.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    start_gazebo_ros_image_bridge_cmd = Node(<br>        package="ros_gz_image",<br>        executable="image_bridge",<br>        arguments=["/camera/image_raw"],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/montecarlo_visual_loc.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con 
            el mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            las líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza este 
            ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    robot_launch_dir = "/opt/jderobot/Launchers/montecarlo_visual_localization"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br>    world_file_name = "roomba_1_house_montecarlo_visual_loc.world"<br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong>montecarlo_visual_localization/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/roomba_1_house_montecarlo_visual_loc.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0" ?&gt;<br><br>&lt;sdf version="1.8"&gt;<br>  &lt;world name="default"&gt;<br>    &lt;plugin<br>      filename="gz-sim-physics-system"<br>      name="gz::sim::systems::Physics"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-user-commands-system"<br>      name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-scene-broadcaster-system"<br>      name="gz::sim::systems::SceneBroadcaster"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-sensors-system"<br>      name="gz::sim::systems::Sensors"&gt;<br>      &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;!-- &lt;gui fullscreen=1&gt;<br>      &lt;camera name='user_camera'&gt;<br>        &lt;pose frame=''&gt;-2.41 5.36 2.04 0.00 0.254 -1.14&lt;/pose&gt;<br>        &lt;view_controller&gt;orbit&lt;/view_controller&gt;<br>        &lt;projection_type&gt;perspective&lt;/projection_type&gt;<br>      &lt;/camera&gt;<br>    &lt;/gui&gt; --&gt;<br><br>    &lt;gravity&gt;0 0 -9.8&lt;/gravity&gt;<br>    &lt;atmosphere type="adiabatic"/&gt;<br><br>    &lt;scene&gt;<br>      &lt;ambient&gt;0.4 0.4 0.4 1&lt;/ambient&gt;<br>      &lt;background&gt;0.7 0.7 0.7 1&lt;/background&gt;<br>      &lt;shadows&gt;true&lt;/shadows&gt;<br>      &lt;grid&gt;false&lt;/grid&gt;<br>    &lt;/scene&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://roombaROS_cam&lt;/uri&gt;<br>      &lt;pose&gt;-1 1.5 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://house_int2_roof&lt;/uri&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://ground_plane_sincolor&lt;/uri&gt;<br>    &lt;/include&gt;<br><br>    &lt;light type="directional" name="sun"&gt;<br>      &lt;cast_shadows&gt;1&lt;/cast_shadows&gt;<br>      &lt;pose&gt;0 0 10 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;0.8 0.8 0.8 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.2 0.2 0.2 1&lt;/specular&gt;<br>      &lt;direction&gt;-0.5 0.1 -0.9&lt;/direction&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>  &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/montecarlo_visual_localization.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son 
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#ffa726" toolbar_text_color_light="#000000" toolbar_color_dark="#ffa726" toolbar_text_color_dark="#000000" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;-2 0 2 0 0.4 0&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Montecarlo Visual Localization) y cambiar
            el valor de la columna <strong>type</strong> de <strong>gazebo</strong> a 
            <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>26	Vacuums House Roof	/opt/jderobot/Launchers/montecarlo_visual_loc.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>26	Vacuums House Roof	/opt/jderobot/Launchers/montecarlo_visual_loc.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/montecarlo_visual_localization.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>montecarlo-visual-localization-harmonic</strong>. Es importante hacer esto 
            siempre para así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i montecarlo-visual-localization-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio 
            <strong>Montecarlo Visual Localization</strong> al lanzar el Docker de 
            RoboticsAcademy con todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semana13/montecarlo_visual_localization_image.png" alt="Montecarlo Visual Localization Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto la casa como la aspiradora han sido migrados 
            correctamente, se muestra una pequeña animación de la aspiradora moviéndose
            para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana13/montecarlo_visual_localization_image.png">
            <source src="videos/semana13/montecarlo_visual_localization_video.mp4" type="video/mp4">
        </video>

    </div>
    
    <!-- Entrada de blog (semana 14): Vacaciones de Navidad -->
    <div id="entry-14" class="entry">
        <p class="date">SEMANA 14: 22-12-2025 al 26-12-2025</p>
        <p>
        <div style="place-items: center; display: grid;">
            <a href="https://www.youtube.com/watch?v=m4qoDcs6YYo&list=PLnxRl-XcaJ2-D_LxxYttFyxYAozDEDiIx&index=3" target="_blank">
                <img width="350" height="200" src="images/semana14/christmas_holiday_board.png" alt="Christmas Holiday Board" class="screenshot" style="cursor: pointer;">
            </a>
        </div>
        </p>
    </div>

    <!-- Entrada de blog (semana 15): Vacaciones de Navidad -->
    <div id="entry-15" class="entry">
        <p class="date">SEMANA 15: 29-12-2025 al 02-01-2026</p>
        <p>
        <div style="place-items: center; display: grid;">
            <a href="https://www.youtube.com/watch?v=rrfS1Ntuyvg&list=PLnxRl-XcaJ2-D_LxxYttFyxYAozDEDiIx&index=6" target="_blank">
                <img width="350" height="200" src="images/semana15/christmas_holiday_board.png" alt="Christmas Holiday Board" class="screenshot" style="cursor: pointer;">
            </a>
        </div>
        </p>
    </div>

    <!-- Entrada de blog (semana 16): Vacaciones de Navidad -->
    <div id="entry-16" class="entry">
        <p class="date">SEMANA 16: 05-01-2026 al 09-01-2026</p>
        <p>
        <div style="place-items: center; display: grid;">
            <a href="https://www.youtube.com/watch?v=cbgCFy8YR7E&list=PLnxRl-XcaJ2-D_LxxYttFyxYAozDEDiIx&index=3" target="_blank">
                <img width="350" height="200" src="images/semana16/christmas_holiday_board.png" alt="Christmas Holiday Board" class="screenshot" style="cursor: pointer;">
            </a>
        </div>
        </p>
    </div>

    <!-- Entrada de blog (semana 17): Migración del ejercicio 3D Reconstruction a Gazebo Harmonic -->
    <div id="entry-17" class="entry">
        <p class="date">SEMANA 17: 12-01-2026 al 16-01-2026</p>

        <h1>
            Migración del ejercicio 3D Reconstruction a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de Montecarlo Visual Localization ya migrado por completo a Gazebo 
            Harmonic, se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo 
            Harmonic de un noveno ejercicio, en este caso, <strong>3D Reconstruction</strong>, 
            que consiste en programar la lógica necesaria para permitir que el robot Kobuki 
            genere una reconstrucción 3D de la escena que recibe a través de sus cámaras, 
            tanto de la izquierda como de la derecha.
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/ComputerVision/3d_reconstruction" target="_blank">
                <img src="images/semana17/3d_reconstruction_exercise.png" alt="3D Reconstruction Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/3d_reconstruction/models/turtlebotROS/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él.
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana17/model.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana17/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/3d_reconstruction/params/turtlebotROS.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes al publicador y al 
            subscriptor del sensor láser LIDAR (<strong>/turtlebotROS/laser/scan</strong>) y 
            de las cámaras (<strong>/cam_turtlebot_left/camera_info</strong> y 
            <strong>/cam_turtlebot_right/camera_info</strong>):
        </p>
        <pre><code># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/turtlebotROS/laser/scan"<br>  gz_topic_name: "/turtlebotROS/laser/scan"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br><br># gz topic published by Sensors plugin (Camera)<br>- ros_topic_name: "/cam_turtlebot_left/camera_info"<br>  gz_topic_name: "/cam_turtlebot_left/camera_info"<br>  ros_type_name: "sensor_msgs/msg/CameraInfo"<br>  gz_type_name: "gz.msgs.CameraInfo"<br>  direction: GZ_TO_ROS<br><br>- ros_topic_name: "/cam_turtlebot_right/camera_info"<br>  gz_topic_name: "/cam_turtlebot_right/camera_info"<br>  ros_type_name: "sensor_msgs/msg/CameraInfo"<br>  gz_type_name: "gz.msgs.CameraInfo"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de la línea <strong>3d_reconstruction/params</strong> para que el 
            fichero que se acaba de crear (<strong>turtlebotROS.yaml</strong>) 
            se tenga en cuenta a la hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # 3D RECONSTRUCTION<br>    3d_reconstruction/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # 3D RECONSTRUCTION<br>    3d_reconstruction/models<br>    3d_reconstruction/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/3d_reconstruction/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creado el directorio <strong>3d_reconstruction/</strong>, y a su vez dentro 
            de él el fichero <strong>spawn_robot.launch.py</strong>, habría que coger cualquier 
            fichero con el mismo nombre de otro ejercicio que ya esté migrado a Gazebo Harmonic,
            copiar su contenido y comentar todo lo relativo a la variable
            <strong>start_gazebo_ros_depth_bridge_cmd</strong>, y lo más importante, modificar 
            el nombre del fichero que se le pasa como argumento a bridge_params (en este caso, 
            <strong>turtlebotROS.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "turtlebotROS"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "turtlebotROS.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    start_gazebo_ros_image_bridge_cmd_left = Node(<br>        package="ros_gz_image",<br>        executable="image_bridge",<br>        arguments=["/cam_turtlebot_left/image_raw"],<br>        output="screen",<br>    )<br><br>    start_gazebo_ros_image_bridge_cmd_right = Node(<br>        package="ros_gz_image",<br>        executable="image_bridge",<br>        arguments=["/cam_turtlebot_right/image_raw"],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    ld.add_action(start_gazebo_ros_image_bridge_cmd_left)<br>    ld.add_action(start_gazebo_ros_image_bridge_cmd_right)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/3d_reconstruction.launch.py
        </strong></p>
        <p>
            Para este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            únicamente las líneas correspondientes a las variables 
            <strong>robot_launch_dir</strong> y <strong>world_file_name</strong>, 
            correspondientes a las rutas en las que se encuentran el directorio que almacena el 
            fichero <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza 
            este ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    robot_launch_dir = "/opt/jderobot/Launchers/3d_reconstruction"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br>    world_file_name = "kobuki_1_reconstruction3d.world"<br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro del directorio 
            <strong>3d_reconstruction/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/kobuki_1_reconstruction3d.world
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <pre><code>&lt;?xml version="1.0" ?&gt;<br><br>&lt;sdf version="1.8"&gt;<br>  &lt;world name="default"&gt;<br>    &lt;plugin<br>      filename="gz-sim-user-commands-system"<br>      name="gz::sim::systems::UserCommands"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-scene-broadcaster-system"<br>      name="gz::sim::systems::SceneBroadcaster"&gt;<br>    &lt;/plugin&gt;<br>    &lt;plugin<br>      filename="gz-sim-sensors-system"<br>      name="gz::sim::systems::Sensors"&gt;<br>      &lt;render_engine&gt;ogre2&lt;/render_engine&gt;<br>    &lt;/plugin&gt;<br><br>    &lt;scene&gt;<br>      &lt;ambient&gt;0.4 0.4 0.4 1&lt;/ambient&gt;<br>      &lt;background&gt;0.7 0.7 0.7 1&lt;/background&gt;<br>      &lt;shadows&gt;true&lt;/shadows&gt;<br>      &lt;grid&gt;true&lt;/grid&gt;<br>    &lt;/scene&gt;<br><br>    &lt;light name='point_light1' type='point'&gt;<br>      &lt;pose frame=''&gt;-3.0 -2.0 4.0 0 0 0&lt;/pose&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>    &lt;light name='point_light2' type='point'&gt;<br>      &lt;pose frame=''&gt;-3.0 2.0 4.0 0 0 0&lt;/pose&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>    &lt;light name='point_light3' type='directional'&gt;<br>      &lt;pose frame=''&gt;0 0 1.0 0 -1.57 0&lt;/pose&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>    &lt;include&gt;<br>      &lt;uri&gt;model://ground_plane_sincolor&lt;/uri&gt;<br>    &lt;/include&gt;<br><br>    &lt;!-- Pioneer2dx model --&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://turtlebotROS&lt;/uri&gt;<br>      &lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;!-- Duck --&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://duck&lt;/uri&gt;<br>       &lt;pose&gt;4.7 3 0  1.57 0 1.57&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;!-- Cereales --&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://cereales&lt;/uri&gt;<br>       &lt;pose&gt;5.3 2.3 0 0 0 0&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;!-- Blocks --&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://blocks&lt;/uri&gt;<br>       &lt;pose&gt;4.66 -4 0 0 0 1.57&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;!-- charactersMario --&gt;<br>    &lt;include&gt;<br>      &lt;uri&gt;model://charactersMario&lt;/uri&gt;<br>       &lt;pose&gt;4.1 0.5 0 0 0 -1.57&lt;/pose&gt;<br>    &lt;/include&gt;<br><br>    &lt;light type="directional" name="sun"&gt;<br>      &lt;cast_shadows&gt;1&lt;/cast_shadows&gt;<br>      &lt;pose&gt;0 0 10 0 0 0&lt;/pose&gt;<br>      &lt;diffuse&gt;0.8 0.8 0.8 1&lt;/diffuse&gt;<br>      &lt;specular&gt;0.2 0.2 0.2 1&lt;/specular&gt;<br>      &lt;direction&gt;-0.5 0.1 -0.9&lt;/direction&gt;<br>      &lt;visualize&gt;false&lt;/visualize&gt;<br>    &lt;/light&gt;<br><br>  &lt;/world&gt;<br>&lt;/sdf&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/3d_reconstruction.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato 
            son exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#ffa726" toolbar_text_color_light="#000000" toolbar_color_dark="#ffa726" toolbar_text_color_dark="#000000" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;-2 0 2 0 0.4 0&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, 3D Reconstruction) y cambiar el valor de
            la columna <strong>type</strong> de <strong>gazebo</strong> a <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>1	3d Reconstruction	/opt/jderobot/Launchers/3d_reconstruction.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>1	3d Reconstruction	/opt/jderobot/Launchers/3d_reconstruction.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/3d_reconstruction.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>3d-reconstruction-harmonic</strong>. Es importante hacer esto siempre para 
            así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i 3d-reconstruction-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio <strong>3D Reconstruction</strong> 
            al lanzar el Docker de RoboticsAcademy con todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semana17/3d_reconstruction_image.png" alt="3D Reconstruction Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto los objetos como el Kobuki han sido migrados 
            correctamente, se muestra una pequeña animación de la solución de este ejercicio
            para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana17/3d_reconstruction_image.png">
            <source src="videos/semana17/3d_reconstruction_video.mp4" type="video/mp4">
        </video>

    </div>

    <!-- Entrada de blog (semana 18): Migración del ejercicio Follow Person a Gazebo Harmonic -->
    <div id="entry-18" class="entry">
        <p class="date">SEMANA 18: 19-01-2026 al 23-01-2026</p>

        <h1>
            Migración del ejercicio Follow Person a Gazebo Harmonic
        </h1>

        <p>
            Con el ejercicio de 3D Reconstruction ya migrado por completo a Gazebo Harmonic, 
            se me ha pedido realizar la migración completa de Gazebo 11 a Gazebo Harmonic de un 
            décimo ejercicio, en este caso, <strong>Follow Person</strong>, que consiste en 
            implementar la lógica de un algoritmo de navegación que se utilizará para seguir a 
            una persona en un hospital utilizando una R-CNN (Red Neuronal Convolucional basada 
            en Regiones) llamada SSD (Detector de Disparo Único).
        </p>

        <div style="place-items: center; display: grid;">
            <a href="https://jderobot.github.io/RoboticsAcademy/exercises/MobileRobots/follow_person" target="_blank">
                <img src="images/semana18/follow_person_exercise.png" alt="Follow Person Exercise" class="screenshot" style="cursor: pointer;">
            </a>
        </div>

        <p>
            A continuación, se encuentran todos los ficheros que se han modificado y / o creado
            (y de qué forma) para poder llevar a cabo la migración completa de este ejercicio
            de Gazebo 11 a Gazebo Harmonic:
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/3d_reconstruction/models/turtlebotROS/model.sdf
        </strong></p>
        <p>
            En este fichero se han modificado las partes correspondientes a las etiquetas
            &lt;plugin&gt; y &lt;sensor&gt;, donde el plugin pasa de estar declarado dentro 
            del sensor a integrarse en él. Además, es importante añadir al final de la nueva 
            versión los plugins correspondientes al <strong>velocity-control-system</strong>
            y al <strong>odometry-publisher-system</strong>:
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de este fichero, adjunto a continuación un enlace a dicho fichero en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana18/model.sdf"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana18/model.sdf</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/3d_reconstruction/params/turtlebotROS.yaml
        </strong></p>
        <p>
            Este fichero se crea de cero en la ruta especificada, aunque se puede coger 
            cualquier fichero del tipo <strong>robot_params.yaml</strong> como referencia. 
            En este caso, se añaden los topics correspondientes a los plugins 
            publicadores y subscriptores del DiffDrive (<strong>/odom</strong> y 
            <strong>/cmd_vel</strong>), del sensor láser LIDAR
            (<strong>/scan</strong>) y de la cámara 
            (<strong>/depth_camera/camera_info</strong>):
        </p>
        <pre><code># gz topic published by DiffDrive plugin<br>- ros_topic_name: "odom"<br>  gz_topic_name: "/odom"<br>  ros_type_name: "nav_msgs/msg/Odometry"<br>  gz_type_name: "gz.msgs.Odometry"<br>  direction: GZ_TO_ROS<br><br># gz topic subscribed to by DiffDrive plugin<br>- ros_topic_name: "cmd_vel"<br>  gz_topic_name: "/cmd_vel"<br>  ros_type_name: "geometry_msgs/msg/Twist"<br>  gz_type_name: "gz.msgs.Twist"<br>  direction: ROS_TO_GZ<br><br># gz topic published by Sensors plugin (LIDAR)<br>- ros_topic_name: "/scan"<br>  gz_topic_name: "/scan"<br>  ros_type_name: "sensor_msgs/msg/LaserScan"<br>  gz_type_name: "gz.msgs.LaserScan"<br>  direction: GZ_TO_ROS<br><br># gz topic published by Sensors plugin (Camera)<br>- ros_topic_name: "/depth_camera/camera_info"<br>  gz_topic_name: "/depth_camera/camera_info"<br>  ros_type_name: "sensor_msgs/msg/CameraInfo"<br>  gz_type_name: "gz.msgs.CameraInfo"<br>  direction: GZ_TO_ROS</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/CustomRobots/CMakeLists.txt
        </strong></p>
        <p>
            En este caso, la única modificación realizada en este fichero es la 
            adición de la línea <strong>3d_reconstruction/params</strong> para que el 
            fichero que se acaba de crear (<strong>turtlebotROS.yaml</strong>) 
            se tenga en cuenta a la hora de lanzar el Docker:
        </p>
        <pre><code># GAZEBO 11<br><br>install(<br>  DIRECTORY<br>    ...<br>    # 3D RECONSTRUCTION<br>    3d_reconstruction/models<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>
        <pre><code># GAZEBO HARMONIC<br><br>install(<br>  DIRECTORY<br>    ...<br>    # 3D RECONSTRUCTION<br>    3d_reconstruction/models<br>    3d_reconstruction/params<br>    ...<br>  DESTINATION share/${PROJECT_NAME})</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/follow_person/spawn_robot.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/follow_person_teleop/spawn_robot.launch.py
        </strong></p>
        <p>
            Una vez creados los directorios <strong>follow_person/</strong> y 
            <strong>follow_person_teleop/</strong>, y a su vez dentro de ellos el fichero 
            <strong>spawn_robot.launch.py</strong>, habría que coger cualquier fichero con el 
            mismo nombre de otro ejercicio que ya esté migrado a Gazebo Harmonic y copiar su 
            contenido, y lo más importante, modificar el nombre del fichero que se le pasa como 
            argumento a bridge_params (en este caso, <strong>turtlebotROS.yaml</strong>):
        </p>
        <pre><code># Copyright 2019 Open Source Robotics Foundation, Inc.<br>#<br># Licensed under the Apache License, Version 2.0 (the "License");<br># you may not use this file except in compliance with the License.<br># You may obtain a copy of the License at<br>#<br>#     http://www.apache.org/licenses/LICENSE-2.0<br>#<br># Unless required by applicable law or agreed to in writing, software<br># distributed under the License is distributed on an "AS IS" BASIS,<br># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br># See the License for the specific language governing permissions and<br># limitations under the License.<br><br>import os<br><br>from ament_index_python.packages import get_package_share_directory<br>from launch import LaunchDescription<br>from launch.actions import DeclareLaunchArgument<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br>    # Get the urdf file<br>    model_folder = "turtlebotROS"<br>    urdf_path = os.path.join(<br>        get_package_share_directory("custom_robots"),<br>        "models",<br>        model_folder,<br>        "model.sdf",<br>    )<br><br>    # Launch configuration variables specific to simulation<br>    # x_pose = LaunchConfiguration('x_pose', default='1.0')<br>    # y_pose = LaunchConfiguration('y_pose', default='-1.5')<br>    # z_pose = LaunchConfiguration('z_pose', default='7.1')<br><br>    # Declare the launch arguments<br>    # declare_x_position_cmd = DeclareLaunchArgument(<br>    #     'x_pose', default_value='1.0',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_y_position_cmd = DeclareLaunchArgument(<br>    #     'y_pose', default_value='-1.5',<br>    #     description='Specify namespace of the robot')<br><br>    # declare_z_position_cmd = DeclareLaunchArgument(<br>    #     'z_pose', default_value='7.1',<br>    #     description='Specify namespace of the robot')<br><br>    # start_gazebo_ros_spawner_cmd = Node(<br>    #     package='ros_gz_sim',<br>    #     executable='create',<br>    #     arguments=[<br>    #         '-name', 'waffle',<br>    #         '-file', urdf_path,<br>    #         '-x', x_pose,<br>    #         '-y', y_pose,<br>    #         '-z', z_pose<br>    #     ],<br>    #     output='screen',<br>    # )<br><br>    bridge_params = os.path.join(<br>        get_package_share_directory("custom_robots"), "params", "turtlebotROS.yaml"<br>    )<br><br>    start_gazebo_ros_bridge_cmd = Node(<br>        package="ros_gz_bridge",<br>        executable="parameter_bridge",<br>        arguments=[<br>            "--ros-args",<br>            "-p",<br>            f"config_file:={bridge_params}",<br>        ],<br>        output="screen",<br>    )<br><br>    start_gazebo_ros_image_bridge_cmd_left = Node(<br>        package="ros_gz_image",<br>        executable="image_bridge",<br>        arguments=["/cam_turtlebot_left/image_raw"],<br>        output="screen",<br>    )<br><br>    start_gazebo_ros_image_bridge_cmd_right = Node(<br>        package="ros_gz_image",<br>        executable="image_bridge",<br>        arguments=["/cam_turtlebot_right/image_raw"],<br>        output="screen",<br>    )<br><br>    # start_gazebo_ros_depth_bridge_cmd = Node(<br>    #     package="ros_gz_image",<br>    #     executable="image_bridge",<br>    #     arguments=["/turtlebot3/camera/depth"],<br>    #     output="screen",<br>    # )<br><br>    ld = LaunchDescription()<br><br>    # Declare the launch options<br>    # ld.add_action(declare_x_position_cmd)<br>    # ld.add_action(declare_y_position_cmd)<br>    # ld.add_action(declare_z_position_cmd)<br><br>    # Add any conditioned actions<br>    # ld.add_action(start_gazebo_ros_spawner_cmd)<br>    ld.add_action(start_gazebo_ros_bridge_cmd)<br>    ld.add_action(start_gazebo_ros_image_bridge_cmd_left)<br>    ld.add_action(start_gazebo_ros_image_bridge_cmd_right)<br>    # ld.add_action(start_gazebo_ros_image_bridge_cmd)<br>    # ld.add_action(start_gazebo_ros_depth_bridge_cmd)<br><br>    return ld</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/follow_person.launch.py<br>FICHERO RoboticsInfrastructure/Launchers/follow_person_teleop.launch.py
        </strong></p>
        <p>
            Para estos ficheros, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con 
            el mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y modificar 
            las líneas correspondientes a las variables <strong>robot_launch_dir</strong> y 
            <strong>world_file_name</strong>, correspondientes a las rutas en las que se 
            encuentran el directorio que almacena el fichero 
            <strong>spawn_robot.launch.py</strong> y el fichero del universo que utiliza este 
            ejercicio.
        </p>
        <pre><code>import os<br><br>from ament_index_python.packages import get_package_share_directory<br><br>from launch import LaunchDescription<br>from launch.actions import (<br>    DeclareLaunchArgument,<br>    IncludeLaunchDescription,<br>    SetEnvironmentVariable,<br>    AppendEnvironmentVariable,<br>)<br>from launch.launch_description_sources import PythonLaunchDescriptionSource<br>from launch.substitutions import LaunchConfiguration, Command<br>from launch_ros.actions import Node<br>from launch.substitutions import LaunchConfiguration<br>from launch_ros.actions import Node<br><br><br>def generate_launch_description():<br><br>    x = LaunchConfiguration("x")<br>    y = LaunchConfiguration("y")<br>    z = LaunchConfiguration("z")<br>    roll = LaunchConfiguration("R")<br>    pitch = LaunchConfiguration("P")<br>    yaw = LaunchConfiguration("Y")<br><br>    package_dir = get_package_share_directory("custom_robots")<br>    ros_gz_sim = get_package_share_directory("ros_gz_sim")<br><br>    gazebo_models_path = os.path.join(package_dir, "models")<br><br>    # FICHERO RoboticsInfrastructure/Launchers/follow_person.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/follow_person"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/follow_person_teleop.launch.py<br>    robot_launch_dir = "/opt/jderobot/Launchers/follow_person_teleop"<br><br>    use_sim_time = LaunchConfiguration("use_sim_time", default="true")<br>    x_pose = LaunchConfiguration("x_pose", default="1.0")<br>    y_pose = LaunchConfiguration("y_pose", default="-1.5")<br>    z_pose = LaunchConfiguration("z_pose", default="7.1")<br><br>    # FICHERO RoboticsInfrastructure/Launchers/follow_person.launch.py<br>    world_file_name = "hospital_follow_person.world"<br><br>    # FICHERO RoboticsInfrastructure/Launchers/follow_person_teleop.launch.py<br>    world_file_name = "hospital_follow_person_teleop.world"<br><br>    worlds_dir = "/opt/jderobot/Worlds"<br>    world_path = os.path.join(worlds_dir, world_file_name)<br><br>    gazebo_server = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(ros_gz_sim, "launch", "gz_sim.launch.py")<br>        ),<br>        launch_arguments={<br>            "gz_args": ["-r -s -v4 ", world_path],<br>            "on_exit_shutdown": "true",<br>        }.items(),<br>    )<br><br>    declare_x_cmd = DeclareLaunchArgument("x", default_value="1.0")<br><br>    declare_y_cmd = DeclareLaunchArgument("y", default_value="-1.5")<br><br>    declare_z_cmd = DeclareLaunchArgument("z", default_value="7.1")<br><br>    declare_roll_cmd = DeclareLaunchArgument("R", default_value="0.0")<br><br>    declare_pitch_cmd = DeclareLaunchArgument("P", default_value="0.0")<br><br>    declare_yaw_cmd = DeclareLaunchArgument("Y", default_value="1.57079")<br><br>    # robot_state_publisher_cmd = IncludeLaunchDescription(<br>    #     PythonLaunchDescriptionSource(<br>    #         os.path.join(robot_launch_dir, "robot_state_publisher.launch.py")<br>    #     ),<br>    #     launch_arguments={"use_sim_time": use_sim_time}.items(),<br>    # )<br><br>    spawn_robot_cmd = IncludeLaunchDescription(<br>        PythonLaunchDescriptionSource(<br>            os.path.join(robot_launch_dir, "spawn_robot.launch.py")<br>        ),<br>        launch_arguments={"x_pose": x_pose, "y_pose": y_pose, "z_pose": z_pose}.items(),<br>    )<br><br>    world_entity_cmd = Node(<br>        package="ros_gz_sim",<br>        executable="create",<br>        arguments=["-name", "world", "-file", world_path],<br>        output="screen",<br>    )<br><br>    ld = LaunchDescription()<br><br>    ld.add_action(SetEnvironmentVariable("GZ_SIM_RESOURCE_PATH", gazebo_models_path))<br>    set_env_vars_resources = AppendEnvironmentVariable(<br>        "GZ_SIM_RESOURCE_PATH", os.path.join(package_dir, "models")<br>    )<br>    ld.add_action(set_env_vars_resources)<br>    ld.add_action(gazebo_server)<br>    # ld.add_action(gazebo_client)<br>    ld.add_action(declare_x_cmd)<br>    ld.add_action(declare_y_cmd)<br>    ld.add_action(declare_z_cmd)<br>    ld.add_action(declare_roll_cmd)<br>    ld.add_action(declare_pitch_cmd)<br>    ld.add_action(declare_yaw_cmd)<br>    ld.add_action(world_entity_cmd)<br>    # ld.add_action(robot_state_publisher_cmd)<br>    ld.add_action(spawn_robot_cmd)<br><br>    return ld</code></pre>
        <p>
            <strong>NOTA</strong>: En caso de que no se haya creado dentro de los directorios 
            <strong>follow_person/</strong> y <strong>follow_person_teleop/</strong> el fichero 
            <strong>robot_state_publisher.launch.py</strong>, es obligatorio comentar 
            y / o eliminar del código todo lo relacionado con la variable 
            <strong>robot_state_publisher_cmd</strong>.
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Worlds/hospital_follow_person.world<br>FICHERO RoboticsInfrastructure/Worlds/hospital_follow_person_teleop.world
        </strong></p>
        <p>
            En estos ficheros, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic y sustituir 
            todos aquellos flags &lt;include&gt; de la versión antigua por aquellos que 
            aparezcan en la versión nueva.
        </p>
        <p>
            <strong>NOTA</strong>: Dada la gran extensión en cuanto a líneas se refiere 
            de estos ficheros, adjunto a continuación un enlace a dichos ficheros en el que se 
            puede visualizar todo su contenido.
        </p>
        <p>
            <p><strong>ENLACE UNIVERSO NORMAL</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana18/hospital_follow_person.world"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana18/hospital_follow_person.world</a></p>
            <p><strong>ENLACE UNIVERSO TELEOPERADO</strong>: <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana18/hospital_follow_person_teleop.world"  target="_blank">https://github.com/aleon2020/PE_2025-2026/blob/main/code/semana18/hospital_follow_person_teleop.world</a></p>
        </p>

        <p><strong>
            FICHERO RoboticsInfrastructure/Launchers/visualization/follow_person.config
        </strong></p>
        <p>
            En este fichero, habría que realizar un Ctrl+C Ctrl+V de cualquier fichero con el 
            mismo formato de nombre que ya haya sido migrado a Gazebo Harmonic, ya que el 
            contenido de todos los ficheros existentes en este directorio y de este formato son 
            exactamente iguales.
        </p>
        <pre><code>&lt;?xml version="1.0"?&gt;<br>&lt;!-- Quick start dialog --&gt;<br>&lt;dialog name="quick_start" show_again="false"/&gt;<br><br>&lt;!-- Window --&gt;<br>&lt;window&gt;<br>    &lt;width&gt;1024&lt;/width&gt;<br>    &lt;height&gt;768&lt;/height&gt;<br>    &lt;style material_theme="Light" material_primary="DeepOrange" material_accent="LightBlue" toolbar_color_light="#ffa726" toolbar_text_color_light="#000000" toolbar_color_dark="#ffa726" toolbar_text_color_dark="#000000" plugin_toolbar_color_light="#bbdefb" plugin_toolbar_text_color_light="#111111" plugin_toolbar_color_dark="#607d8b" plugin_toolbar_text_color_dark="#eeeeee"/&gt;<br>    &lt;menus&gt;<br>        &lt;drawer visible="false"&gt;<br>        &lt;/drawer&gt;<br>        &lt;plugins visible="false"&gt;<br>        &lt;/plugins&gt;<br>    &lt;/menus&gt;<br>    &lt;dialog_on_exit&gt;false&lt;/dialog_on_exit&gt;<br>&lt;/window&gt;<br><br>&lt;!-- GUI plugins --&gt;<br>&lt;!-- 3D scene --&gt;<br>&lt;plugin filename="MinimalScene" name="3D View"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;3D View&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="string" key="state"&gt;docked&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>    &lt;engine&gt;ogre2&lt;/engine&gt;<br>    &lt;scene&gt;scene&lt;/scene&gt;<br>    &lt;ambient_light&gt;0.4 0.4 0.4&lt;/ambient_light&gt;<br>    &lt;background_color&gt;0.8 0.8 0.8&lt;/background_color&gt;<br>    &lt;camera_pose&gt;-2 0 2 0 0.4 0&lt;/camera_pose&gt;<br>&lt;/plugin&gt;<br><br>&lt;!-- Plugins that add functionality to the scene --&gt;<br>&lt;plugin filename="GzSceneManager" name="Scene Manager"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="InteractiveViewControl" name="Interactive view control"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;property key="resizable" type="bool"&gt;false&lt;/property&gt;<br>        &lt;property key="width" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="height" type="double"&gt;5&lt;/property&gt;<br>        &lt;property key="state" type="string"&gt;floating&lt;/property&gt;<br>        &lt;property key="showTitleBar" type="bool"&gt;false&lt;/property&gt;<br>    &lt;/gz-gui&gt;<br>&lt;/plugin&gt;<br><br>&lt;plugin filename="WorldStats" name="World stats"&gt;<br>    &lt;gz-gui&gt;<br>        &lt;title&gt;World stats&lt;/title&gt;<br>        &lt;property type="bool" key="showTitleBar"&gt;false&lt;/property&gt;<br>        &lt;property type="bool" key="resizable"&gt;false&lt;/property&gt;<br>        &lt;property type="double" key="height"&gt;110&lt;/property&gt;<br>        &lt;property type="double" key="width"&gt;290&lt;/property&gt;<br>        &lt;property type="double" key="z"&gt;1&lt;/property&gt;<br><br>        &lt;property type="string" key="state"&gt;floating&lt;/property&gt;<br>        &lt;anchors target="3D View"&gt;<br>        &lt;line own="right" target="right"/&gt;<br>        &lt;line own="bottom" target="bottom"/&gt;<br>        &lt;/anchors&gt;<br>    &lt;/gz-gui&gt;<br><br>    &lt;sim_time&gt;true&lt;/sim_time&gt;<br>    &lt;real_time&gt;true&lt;/real_time&gt;<br>    &lt;real_time_factor&gt;true&lt;/real_time_factor&gt;<br>    &lt;iterations&gt;true&lt;/iterations&gt;<br>    &lt;topic&gt;/world/world_demo/stats&lt;/topic&gt;<br><br>&lt;/plugin&gt;</code></pre>

        <p><strong>
            FICHERO RoboticsInfrastructure/database/universes.sql
        </strong></p>
        <p>
            En este fichero, habría que identificar el ejercicio que se quiere migrar de 
            Gazebo 11 a Gazebo Harmonic (en este caso, Follow Person) y cambiar
            el valor de la columna <strong>type</strong> de <strong>gazebo</strong> a 
            <strong>gz</strong>:
        </p>
        <pre><code># GAZEBO 11<br>10	Follow Person	/opt/jderobot/Launchers/follow_person.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}<br>11	Follow Person Teleop	/opt/jderobot/Launchers/follow_person_teleop.launch.py	None	ROS2	gazebo	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>
        <pre><code># GAZEBO HARMONIC<br>10	Follow Person	/opt/jderobot/Launchers/follow_person.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_person.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}<br>11	Follow Person Teleop	/opt/jderobot/Launchers/follow_person_teleop.launch.py	{"gzsim":"/opt/jderobot/Launchers/visualization/follow_person.config"}	ROS2	gz	{0.0,0.0,0.0,0.0,0.0,0.0}</code></pre>

        <p>
            Una vez realizados todos estos cambios en todos los ficheros mencionados, 
            he hecho commit y push en una nueva rama que he creado y publicado llamada 
            <strong>follow-person-harmonic</strong>. Es importante hacer esto 
            siempre para así evitar cualquier tipo de conflicto con la rama principal.
        </p>

        <p>
            Como todos los cambios se han realizado en ficheros que se encuentran dentro de 
            RoboticsInfrastructure, es obligatorio compilar un nuevo RADI. Para ello, se deben 
            ejecutar los siguientes comandos en la terminal:
        </p>
        <pre><code>cd scripts/RADI/</code></pre>
        <pre><code>./build.sh -i follow-person-harmonic</code></pre>
        <p>
            <strong>NOTA</strong>: Cada vez que se compile un nuevo RADI no se borrará el 
            anterior, por lo que el espacio disponible en disco se irá llenando y llenando 
            hasta que no quede espacio disponible en disco. Para evitar que esto ocurra, se 
            debe ejecutar el siguiente comando en la terminal, el cual se encargará de borrar 
            todo el espacio de memoria que se ha ido llenando por cada RADI compilado:
        </p>
        <pre><code>docker system prune -af</code></pre>

        <p>
            Una vez finalizada la ejecución del script <strong>build.sh</strong>, se debe 
            regresar al repositorio principal:
        </p>
        <pre><code>cd ../..</code></pre>

        <p>
            Pero antes de ejecutar el script <strong>develop_academy.sh</strong>, habría que 
            modificar la siguiente línea del fichero 
            <strong>RoboticsAcademy/compose_cfg/dev_humble_cpu.yaml</strong>:
        </p>
        <pre><code># ANTES<br>  robotics-academy:<br>    image: jderobot/robotics-academy:latest<br><br># DESPUÉS<br>  robotics-academy:<br>    image: jderobot/robotics-academy:test</code></pre>

        <p>
            Con este cambio ya realizado, ya se puede lanzar el script 
            <strong>develop_academy.sh</strong>:
        </p>
        <pre><code>./scripts/develop_academy.sh</code></pre>

        <p>
            Y por último, sólo quedaría acceder a la dirección web `http://0.0.0.0:7164/` que 
            aparece en la terminal al ejecutar el comando anterior para poder entrar a Unibotics 
            en local y verificar que los cambios se han realizado correctamente.
        </p>

        <p>
            A continuación se muestra cómo se ve el ejercicio 
            <strong>Follow Person</strong> al lanzar el Docker de 
            RoboticsAcademy con todos estos cambios realizados:
        </p>
        <div style="place-items: center">
            <img src="images/semana18/follow_person_image.png" alt="Follow Person Image" class="screenshot">
        </div>
        <p>
            Además, para verificar que tanto el escenario como el robot han sido migrados 
            correctamente, se muestra una pequeña animación del robot moviéndose
            para verificar que todo el proceso se ha realizado correctamente:
        </p>
        <video width="960" height="540" controls style="display: block; margin: 0 auto;" poster="images/semana18/follow_person_image.png">
            <source src="videos/semana18/follow_person_video.mp4" type="video/mp4">
        </video>

    </div>

    <!-- Entrada de blog (semana 19) -->
    <div id="entry-19" class="entry">
        <p class="date">SEMANA 19: 26-01-2026 al 30-01-2026</p>
        <p>
        <div style="place-items: center; display: grid;">
            <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/docs/Memoria%20de%20Pr%C3%A1cticas%20Externas%20Alberto%20Le%C3%B3n%20Luengo.pdf" target="_blank">
                <img width="350" height="350" src="images/semana19/internship_report_writing.png" alt="Internship Report Writing" class="screenshot" style="cursor: pointer;">
            </a>
        </div>
        </p>
    </div>

    <!-- Entrada de blog (semana 20) -->
    <div id="entry-20" class="entry">
        <p class="date">SEMANA 20: 02-02-2026 al 06-02-2026</p>
        <p>
        <div style="place-items: center; display: grid;">
            <a href="https://github.com/aleon2020/PE_2025-2026/blob/main/docs/Memoria%20de%20Pr%C3%A1cticas%20Externas%20Alberto%20Le%C3%B3n%20Luengo.pdf" target="_blank">
                <img width="350" height="350" src="images/semana20/internship_report_writing.png" alt="Internship Report Writing" class="screenshot" style="cursor: pointer;">
            </a>
        </div>
        </p>
    </div>

    <!-- Script que va mostrando el contenido de cada entrada -->
    <script>
        function showEntry(week) {
            let entries = document.querySelectorAll('.entry');
            entries.forEach(entry => entry.style.display = 'none');
            document.getElementById('entry-' + week).style.display = 'block';
        }
    </script>

</body>
</html>
